# KS0464 Smart Turtle Robot Car V3.0

![](media/78ea489a5ebfbfadfdf6d6e18dc5330b.png)

## 1. Introduction

Nowadays, technological education such as VR, kids programming, and artificial
intelligence, has become mainstream in educational industry. Thereby, people
attach importance to STEAM education.

The turtle multi-purpose robot car, newly upgraded by the Keyes team, is one of
the most favoured programming robots.

It is not only beautiful in appearance, but also powerful in function. In
addition to the common function like line tracking, obstacle avoidance and
remote control, etc.

15 learning projects, from simple to complex, will guide you how to make a smart
turtle robot on you own and introduce the detailed knowledge about sensors and
modules.

Simultaneously, it is the best choice if you intend to obtain a DIY robot for
learning programming, entertainment and competition requirement.

## 2. Features

1.Multi-purpose function: Obstacle avoidance, follow, IR remote control,
Bluetooth control, ultrasonic follow and displayed face emoticons.

2.Simple assembly: No soldering circuit required, complete assembly easily.

3.High Tenacity: Aluminum alloy bracket, metal motors, high quality wheels and
tracks

4.High extension: expand other sensors and modules through motor driver shield
and sensor shield

5.Multiple controls: IR remote control, App control(IOS and Android system)

6.Basic programming：Mixly programming.

## 3. Specification

Working voltage: 5v

Input voltage: 7-12V

Maximum output current: 2A

Maximum power dissipation: 25W (T=75℃)

Motor speed: 5V 200 rpm/min

Motor drive mode: dual H bridge drive

Ultrasonic induction angle: \<15 degrees

Ultrasonic detection distance: 2cm-400cm

Infrared remote control distance: 10 M (at the open environment without
interference)

Bluetooth remote control distance: 35-50 M at the open environment without
interference)

Bluetooth control: support Android and iOS system

## 4. Product List

## 5. Assembly Guide

**Note: Peel the plastic film off the board first when installing the smart car.
To be honest, we never intend to send wood to you.**

**Step 1: Mount Motor Wheel**

-   M3\*6MM Round Head Screw \*2

-   M3\*6MM Flat Head Screw \*2

-   M3 Nickel Plated Nut \*2

-   Bottom PCB\*1

-   Tracking Sensor \*1

-   Universal Caster \*2

![](media/88e38606d781b397a01dda7c9a8fbfc0.png)

**Step 2: Assemble Parts**

Prepare the parts as follows:

-   M3\*6MM Round Head Screw \*2

-   M2 Nut \*4

-   12FN20 Motor \*2

-   U-type Holder\* 2

-   N20 Motor Wheel \*2

-   2P Wire \*2

-   5P Wire \*1

-   M2\*12MM Round Head Screw \*4

-   2-cell AA Battery Holder \*1

-   M3\*6M Flat Head Screw \*2

-   M3 Nut \*2

![](media/ec298ef9e65d4d8ddf3a13cf3071a474.png)![](media/58500fdcea9554df685f22feecff4a44.png)

![](media/5a62f96ba1cfdf0220a481bfc8c5df47.png)![](media/a083144e7cc46390738559ebd68f438d.png)![](media/2f5261f3ddc228d9854e0bd0588bd92b.png)![](media/001d991b3fc057e80c7695920ea1e5c1.png)

**Step 3: Install Top PCB**

Prepare the parts as follows:

-   Top PCB \*1

-   M3 Nut \*1

-   M3\*6MM Round Head Screw \*9

-   M3\*10MM Hexagon Copper Bush \*8

-   IR Receiver Sensor \*1

![](media/3181f125bb86f308b6f2225dd568d11e.png)

**Step 4: Mount Control Board**

Prepare the parts as follows:

-   V4.0 board\*1

-   Motor Drive Shield V2\*1

-   M3\*6MM Round Head Screw \*4

M3\*6MM round-head screw \*4

![](media/aab04e120897037ba637f684ea2c8fcd.png)

![](media/e0a59715a1c7a65a96fac1528d4a953c.png)

**Step 5: Servo Plastic Platform**

Prepare the parts as follows:

-   Servo \*1

-   M2\*4 Screw \*1

-   Black Tie\*2

-   Ultrasonic Sensor\*1

-   Black Plastic Platform \*1

-   M1.2\*4 Tapping Screw \*4

-   M2\*8 Tapping Screw \*2

![](media/b86186c2d44737305a389a887da27ac7.png)
![](media/4988b1d4680b02c334af9a17084fb86d.png)
![](media/22c91ff96312ceb35e347f2e2a14570b.png)
![](media/bbbdf73ca24e03593b81e29350cab14c.png)
![](media/e7d50aeef7f45e7ad027c12e0bf816cf.png)

**Step 6: Final Assembly**

Prepare the parts as follows:

-   M3\*6MM Round Head Screw \*12

-   M3\*40MM Hexagon Copper Bush\*4

-   8x8 Dot Matrix \*1

-   Jumper Wire \*4

![](media/4a5a51938ed5966a7dfddbbbd24ccb06.png)
![](media/d325c459fd69dfc1fd5da47195fac41d.png)
![](media/a81dbd96dd8a30eb91f3d632f82da40e.png)
![](media/5ea9f63d18f3094e627d2d8b00d40968.png)

**Step 7: Hook-up Guide**

![](media/ad595165f1a48f34fb395eb3b7730fe4.png)
![](media/b3e943d6973e624f9dc1e14db45fe181.png)
![](media/ec953931a988c9d5f05fa9329d1fe26b.png)
![](media/78ec041c0cdfac7ce022d933d502008e.png)!

[](media/802c838b592dd6adec23950d3ca4ef2b.png)
![](media/18207632bb4be8e2678af744566b5e06.png)

## **6.Install Mixly Software and Driver**

1.  **Download and Install Mixly**

①Description

Mixly is a free open-source graphical Arduino programming software, based on
Google’s Blockly graphical programming framework, and developed by Mixly Team@
BNU.

It is a complete support ecosystem for creative e-education, a stage for maker
educators to realize their dreams.

② Download Mixly1.0

Windows System：https://fs.keyestudio.com/Mixly1-Windows

MACOS System：https://fs.keyestudio.com/Mixly1-MACOS

We will take Mixly1.0 (Windows version) as example, and the installation method
of MAC version is similar with it.

You will get installation package after downloading. As shown below:

![](media/2c120c5b3e52fbec94b62b48a016a4d5.png)

Unzip the package, you will see “Mixly 1.0 for keyestudio.exe”

![](media/f8201facff78d06aad9ced9f5fe65e0f.png)

Double-click ![](media/8ec85e7035e6acc2271635f7c03dfc8e.png)”Mixly 1.0 for
keyestudio.exe”, the following interface pops up.

![](media/3b4de4ee8a8535e2e316c38e4c95e28f.png)

We have to choose correct Arduino development board and name, as shown below:

![](media/afbba18511c277cd0cf580353d22ac7f.png)

Select correct COM port(the corresponding port will be shown after installing
driver successfully)

![](media/cf570d717ad63f4d9c1793dcdbd65254.png)

You have to know the function of every area and interface on Mixly software
before uploading program on Arduino development board.

![](media/c3360c388c06334c2d06c168763a3bed.png)

![](media/c09dc67b6729cab1451932399afcbde6.png)

1.  **Keyestudio V4.0 Development Board**

We need to know keyestudio V4.0 development board, as a core of this smart car.

![](media/d48e310dbb7f60760a02fbd88c17d97a.png)

Keyestudio V4.0 development board is an Arduino uno -compatible board, which is
based on ATmega328P MCU, and with a CP2102 Chip as a UART-to-USB converter.

![](media/308315eef3c603cdf0e8babfc4d9c297.jpeg)

It has 14 digital input/output pins (of which 6 can be used as PWM outputs), 6
analog inputs, a 16 MHz quartz crystal, a USB connection, a power jack, 2 ICSP
headers and a reset button.

![](media/95bcb6f3d82a26fd7286459f2e5dd2e6.jpeg)

It contains everything needed to support the microcontroller; simply connect it
to a computer with a USB cable or power it via an external DC power jack (DC
7-12V) or via female headers Vin/ GND(DC 7-12V) to get started.

| Microcontroller             | ATmega328P-PU                               |
|-----------------------------|---------------------------------------------|
| Operating Voltage           | 5V                                          |
| Input Voltage (recommended) | DC7-12V                                     |
| Digital I/O Pins            | 14 (D0-D13) (of which 6 provide PWM output) |
| PWM Digital I/O Pins        | 6 (D3, D5, D6, D9, D10, D11)                |
| Analog Input Pins           | 6 (A0-A5)                                   |
| DC Current per I/O Pin      | 20 mA                                       |
| DC Current for 3.3V Pin     | 50 mA                                       |
| Flash Memory                | 32 KB (ATmega328P-PU)                       |
| SRAM                        | 2 KB (ATmega328P-PU)                        |
| EEPROM                      | 1 KB (ATmega328P-PU)                        |
| Clock Speed                 | 16 MHz                                      |
| LED_BUILTIN                 | D13                                         |

1.  **Installing V4.0 board Driver**

Let’s install the driver of keyestudio V4.0 board. The USB-TTL chip on V4.0
board adopts CP2102 serial chip. The driver program of this chip is included in
Arduino 1.8 version and above, which is convenient. Plug on USB port of board,
the computer can recognize the hardware and automatically install the driver of
CP2102.

![](media/5a7574db1405f5759eaa51fd01ac45bc.png)

If install unsuccessfully, or you intend to install manually, open the device
manager of computer. Right click Computer----- Properties----- Device Manager

![](media/afa5b0dde9342bd7ad9f385333cb6f55.png)

There is a yellow exclamation mark on the page, which implies installing
unsuccessfully. Then we double click the hardware and update the driver.

![](media/c26ca0ef1bf1506c815b6e3e239cf525.png)

Click “OK” to enter the following page, click “browse my computer for updated
driver software”, find out the installed or downloaded ARDUINO software. As
shown below:

![](media/4ec7a5ea3c8a1fd9663eef4768b687c5.png)

There is a DRIVERS folder in Arduino software installed
package（![](media/f50a31a59716594afbd7c2254cfd521e.png)）, open driver folder
and you can see the driver of CP210X series chips.

![](media/a2f8e587a4621983a0664292865b92e8.png)
![](media/6b2096635947dee069104f6032b6fd15.png)
![](media/f4b45a57d6b1e965d611b14915e7b440.png)

We click “Browse”, then find out the driver folder, or you could enter “driver”
to search in rectangular box, then click “next”, the driver will be installed
successfully. (I place Arduino software folder on the desktop, you could follow
my way)

![](media/417de936fa9720c7a7427c4d07718292.png)

Open device manager, we will find the yellow exclamation mark disappear. The
driver of CP2102 is installed successfully.

![](media/efce0ba96c48d853f302730b4d481ee9.jpeg)

![](media/2f751d5f4e4c0c18fa862c589eaaf0da.jpeg)

**(4) Start the first program**

Click“Open”→ sample → arduino→ Arduino → 01 IN-OUT→01-LED Blink.mix

![](media/b8191b5c11060a48ca25c2d605a57183.png)

The corresponding board and COM port will be shown after setting board and COM
port.

![](media/c6ae6346cfadc1500c91cd9096b835a1.png)

Click **Compile** to start compiling the program, check errors.

![](media/3cc4f50c5a62d3356fc0c5cc9af85643.png)

Click **Upload** to upload the program, upload successfully.

![](media/f01375e7ffb9caa13906b04ec77ed381.png)

After uploading the program successfully, the on-board LED blinks for 1s.
Congratulation, you finish the first program.

## 7. Projects:

The whole project begins with basic program. Starting from simple to complex,
the lessons will guide you to assemble robot car and absorb the knowledge of
electronic and machinery step by step. I reckon that you could hardly sit still
and itch to have a go, let’s get started.

Note: (G), marked on each sensor and module, implies negative pole, which is
connected to “G”, ”-”or “GND”on the sensor shield and control board ; (V)
represents positive pole, which is linked with V , VCC, + or 5V on the sensor
shield and control board.

### Project 1: LED Blink

  **Description**

![](media/7541db758dbca2c2a100b2b0227f9af4.jpeg)

For the starter and enthusiast, this is a fundamental program---LED Blink.

LED, the abbreviation of light emitting diodes, consist of Ga, As, P, N chemical
compound and so on. The LED can flash diverse color by altering the delay time
in the test code. When in control, power on GND and VCC, the LED will be on if S
end is high level; nevertheless, it will go off.

![](media/85b2076096371fd9ca03671602b1e5ce.png)
![](media/801469132d9c36d316275ff74d7aed82.png)

1.  **Specification**

-   Control interface:

-   digital port

-   Working voltage: DC 3.3-5V

-   Pin spacing: 2.54mm

-   LED display color: red

1.  **Components**

![](media/bd97a6a6efc6f9c6f3c9fc14996ec368.png)

1.  **Wiring Diagram**

![](media/bd05816bd2764b18d9315fc2e6405a0f.png)

The expansion board is stacked on development board, - of LED module is
connected to G of shield,“+”is linked with 5V, S end is attached to D3.

1.  **Test Code：**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                               |
|-----------|-----------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_1_LED Blink |
|           | File Name                                           |
|           | lesson_1.1_LED Blink                                |

You could edit code step by step as follows:

1.  Enter“Control”to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

2.  Click“Sensor” →
    “ControlOutput”→![](media/aff24ef3f0c42f62d87a2ef53fdb58b2.png)，and combine
    it with block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)，

3.  S end of red LED is connected D3 of sensor shield, click the drop-down
    triangle button to set PIN 3 and LOW.

![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/d7b6332995d5eddda8b2a31649c45575.png)

1.  ![](media/4019c226046e1d8b65d3108a37f0bb2b.png)Copy
    block![](media/ba6645d70fc568d2577ddcb1f57b1674.png)once，and set to HIGH

![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/f228e88c3c17ec0689263e25b2730862.png)

1.  Click “Control” to drag out
    block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)

![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/453c94f7e4233a5d41a03c492ee964e3.png)

1.  ![](media/4019c226046e1d8b65d3108a37f0bb2b.png)Duplicate code
    string![](media/453c94f7e4233a5d41a03c492ee964e3.png)once，and set to LOW.

![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/e84d458deedc9a4cd80e431c94bed9ac.png)

Complete Program：

![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/80faae9785a593b73ef49d74661f3dda.png)

1.  **Test Result：**

Upload the program, LED connected to D9 flickers with the interval of 1s.

1.  **Extension Practice：**

We succeed to blink LED. Next, let’s observe how LED will change if we modify
pins and delay time.

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                               |
|-----------|-----------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_1_LED blink |
|           | File Name                                           |
|           | lesson_1.2_Extension Practice                       |

You could edit code step by step as follows:

Complete Program：

![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/4019c226046e1d8b65d3108a37f0bb2b.png)
![](media/49ea73acc2b4b74641c4b5cc90f53462.png) 


The LED flickers faster through the test result, therefore, pins and delay time
could affect flash frequency.

### Project 2: Adjust LED Brightness

1.  ![](media/7541db758dbca2c2a100b2b0227f9af4.jpeg)**Description：**

In previous lesson, we control LED on and off and make it blink.

In this project, we will control LED brightness through PWM to simulate
breathing effect. Similarly, you can change the step length and delay time in
the code so as to demonstrate different breathing effect.

PWM is a means of controlling the analog output via digital means. Digital
control is used to generate square waves with different duty cycles (a signal
that constantly switches between high and low levels) to control the analog
output.In general, the input voltage of port are 0V and 5V. What if the 3V is
required? Or what if switch among 1V, 3V and 3.5V? We can’t change resistor
constantly. For this situation, we need to control by PWM.

![](media/bbcfcb9ae56abb7e80ee587246fc4be9.gif)

For the Arduino digital port voltage output, there are only LOW and HIGH, which
correspond to the voltage output of 0V and 5V. You can define LOW as 0 and HIGH
as 1, and let the Arduino output five hundred 0 or 1 signals within 1 second.

If output five hundred 1, that is 5V; if all of which is 1, that is 0V. If
output 010101010101 in this way then the output port is 2.5V, which is like
showing movie. The movie we watch are not completely continuous. It actually
outputs 25 pictures per second. In this case, the human can’t tell it, neither
does PWM. If want different voltage, need to control the ratio of 0 and 1. The
more 0,1 signals output per unit time, the more accurately control.

PWM is a technology to obtain analog quantity through digital method. Digital
control forms a square wave, and the square wave signal only has two states of
turning on and off (that is, high or low levels). By controlling the ratio of
the duration of turning on and off, a voltage varying from 0 to 5V can be
simulated. The time turning on(academically referred to as high level) is called
pulse width, so PWM is also called pulse width modulation.

Through the following five square waves, let’s acknowledge more about PWM.

![](media/553f3d1b6ca04e1aa0479841dd075fa2.png)

In the above figure, the green line represents a period, and value of
analogWrite() corresponds to a percentage which is called Duty Cycle as well.
Duty cycle implies that high-level duration is divided by low-level duration in
a cycle. From top to bottom, the duty cycle of first square wave is 0% and its
corresponding value is 0. The LED brightness is lowest, that is, turn off. The
more time high level lasts, the brighter the LED. Therefore, the last duty cycle
is 100%, which correspond to 255, LED is brightest. 25% means darker.

PWM mostly is used for adjusting the LED brightness or rotation speed of motor.

It plays vital role in controlling smart robot car. I believe that you can’t
wait to enter next project.

1.  **Components**

![](media/e88bbf035d7aa92350b88ad5e5ff594b.png)

1.  **Wiring Diagram**

![](media/bd05816bd2764b18d9315fc2e6405a0f.png)

1.  **Test Code：**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                           |
|-----------|-----------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_2_Adjust LED Brightness |
|           | File Name                                                       |
|           | lesson_2.1_Adjust LED Brightness                                |

You could edit code step by step as follows:

1.  Click“Control” to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

2.  Go
    to“sensor”→“ControlOutput”→![](media/aff24ef3f0c42f62d87a2ef53fdb58b2.png)
    →![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)，and set to LOW

![](media/d7b6332995d5eddda8b2a31649c45575.png)

1.  Red LED is connected to D3, so set to PIN 3 and LOW

![](media/b1825ecc343c0cadd3a1bff99ca565e9.png)
![](media/d7b6332995d5eddda8b2a31649c45575.png)

(4) Enter“Control”to get
block![](media/d551cec2b04e244ba508705b13925c97.png)，set block:
![](media/ed65220e4e5a60e70a5ce4ba2f2d0bb0.png)

![](media/5514f55944f9af479a6a016590260864.png)(5) Enter “In/Out” to get
block![](media/a17197d6cd3de5fb2e3c6dc673a02f4d.png)，

(6) Click “Variables” to move
block![](media/fdc785cb5f7ddb9b3fdf361771904d09.png)into 0 box behind value.

![](media/5514f55944f9af479a6a016590260864.png)
![](media/b03cc4790571f51421f722bf555ba5e0.png)

(7) Click ”Control”to move
block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)into
block![](media/ed65220e4e5a60e70a5ce4ba2f2d0bb0.png)，delay in 5ms.

![](media/5514f55944f9af479a6a016590260864.png)
![](media/b41877c31dd7b2a8a3f790483de1e100.png)

1.  ![](media/5514f55944f9af479a6a016590260864.png)Copy code
    string![](media/b41877c31dd7b2a8a3f790483de1e100.png)once，set code
    ![](media/5514f55944f9af479a6a016590260864.png)
    ![](media/5514f55944f9af479a6a016590260864.png)string as follows:
    ![](media/ab6b2941492e44a37f7b99a09b5c1ee6.png)

Complete Program：

![](media/5514f55944f9af479a6a016590260864.png)
![](media/5514f55944f9af479a6a016590260864.png)
![](media/b1825ecc343c0cadd3a1bff99ca565e9.png)
![](media/3e4801e246585aa58dfafda5f25a35c7.png)

1.  **Test Result：**

Upload test code successfully, LED gradually becomes brighter then darker, like
human breath, rather than light on and off immediately.

1.  **Extension Practice：**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                           |
|-----------|-----------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_2_Adjust LED Brightness |
|           | File Name                                                       |
|           | lesson_2.2_Extension Practice                                   |

You could edit code step by step as follows:

Complete Program：

![](media/5514f55944f9af479a6a016590260864.png)
![](media/5514f55944f9af479a6a016590260864.png)
![](media/b1825ecc343c0cadd3a1bff99ca565e9.png
![](media/802ce0d48b35cb64f18205ae11d61754.png)


Upload the code to development board, LED flickers more slowly.

### Project 3 : Line Tracking Sensor

1.  **Description：**

![](media/25759428ff5123fd8fef3fbb0a723cd3.jpeg)

The tracking sensor is actually an infrared sensor. The component used here is
the TCRT5000 infrared tube.

Its working principle is to use the different reflectivity of infrared light to
the color, then convert the strength of the reflected signal into a current
signal.

During the process of detection, black is active at HIGH level, but white is
active at LOW level. The detection height is 0-3 cm.

Keyestudio 3-channel line tracking module has integrated 3 sets of TCRT5000
infrared tube on a single board, which is more convenient for wiring and
control.

By rotating the adjustable potentiometer on the sensor, it can adjust the
detection sensitivity of the sensor.

1.  **Specification**

Operating Voltage: 3.3-5V (DC)

Interface: 5PIN

Output Signal: Digital signal

Detection Height: 0-3 cm

Special note: before testing, turn the potentiometer on the sensor to adjust the
detection sensitivity. When adjust the LED at the threshold between ON and OFF,
the sensitivity is the best.

1.  **Components**

![](media/48018bebb628ebf41533cc7f2494ae0e.png)

1.  **Connection Diagram：**

![](media/352a7a13f9a8c3ea706bb2a01932d4b4.png)

**5. Test Code：**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                           |
|-----------|-----------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_3_Line Tracking Sensor |
|           | File Name                                                       |
|           | lesson_3.1_Line Tracking Sensor                                 |

You could edit code step by step as follows:

1.  Click “Control” to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

2.  Enter “Serial port” to move
    block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into
    ![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)block.

![](media/ab706faf61854a4bb27663a5cac4325c.png)

(3) Go to “Variables” to move![](media/1ae07a66a021f66804a4db9141d3e6f5.png)into
block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)for three times；then enter
“Math” to drag block ![](media/0171c9b9d68df2b854ebded805ca3371.png)and copy it
for 3 times.

(4) Combine![](media/0171c9b9d68df2b854ebded805ca3371.png) with
![](media/1ae07a66a021f66804a4db9141d3e6f5.png)block, and separately set to
val_L, val_M and val_R.

![](media/30065ea3ea3f61f3466205d9af84a4c9.png)

(5) Enter “Variables” to move out
block![](media/4d36fd0b35d9982289a193bd291a1d7c.png)，

1.  Go to “Sensor” → “DigitalRead”
    →![](media/eab5fe2561c4d55749e7183e40617b1a.png)

2.  Integrate
    block![](media/4d36fd0b35d9982289a193bd291a1d7c.png)with
    ![](media/eab5fe2561c4d55749e7183e40617b1a.png)block.

3.  The line tracking sensor is linked with D6, so set to PIN 11.

4.  ![](media/8f94857e3f31abc535003e96aa9d7406.png)Replicate
    block![](media/be9d0c8f176a84ffc394eb32e2fed825.png)twice，and separately
    change val_L into val_M and val_R;

5.  The tracking sensor is also connected to D7 and D8, therefore, set to PIN 7
    and PIN 8

![](media/8f94857e3f31abc535003e96aa9d7406.png)
![](media/d2169e7c7ea5729ebadbb291f128feee.png)

1.  Click “Serial Port”to drag out
    block![](media/7f8422c9a75e8f402b51c2a003d319d9.png)，and go to “Text” to
    move block![](media/3b18dc31f0ae89a9f3149c9ef027724b.png)into
    block![](media/7f8422c9a75e8f402b51c2a003d319d9.png)，

2.  Change hello into
    left：![](media/7f8422c9a75e8f402b51c2a003d319d9.png)+![](media/3b18dc31f0ae89a9f3149c9ef027724b.png)=![](media/45fb5a0f82ce8c4646eac9f23a903cd5.png)

3.  Copy block![](media/7f8422c9a75e8f402b51c2a003d319d9.png)again，and
    enter“Variables”to move
    block![](media/c9ea8fe0c1d00b9b78919d7c86b64a45.png)into![](media/7f8422c9a75e8f402b51c2a003d319d9.png)

4.  Replicate code ![](media/45fb5a0f82ce8c4646eac9f23a903cd5.png)once and
    delete left：， as shown below:

![](media/8f94857e3f31abc535003e96aa9d7406.png)
![](media/bbe38ba8aa5623b89a3cf06037c937a3.png)

1.  Duplicate code
    string![](media/5c50121d1aacb9a9803beb1ac0108b58.png)once，and change
    left：into middle : , val_L into val_M.

2.  Copy block![](media/99f846a695d03cfb2b8aeaa095ea5a51.png)，and alter
    left：into right：

3.  Go to“Serial Port”to drag
    out![](media/b1f7f1d1c2b65b3ebe359a9e8181ed46.png)block ，and enter
    “Variables” to drag ![](media/4a9a477e92174ae4c461fc7d73c09184.png)into
    block![](media/b1f7f1d1c2b65b3ebe359a9e8181ed46.png).

![](media/8f94857e3f31abc535003e96aa9d7406.png)
![](media/0b66d9a66fbc63fce7de2788128a3802.png)

1.  Enter “Control” to get block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png),
    and delay in 500ms.

![](media/8f94857e3f31abc535003e96aa9d7406.png)
![](media/5f55b5c17b4b6fc8d47de7a47ad5fdb8.png)

Complete Program：

![](media/8f94857e3f31abc535003e96aa9d7406.png)
![](media/8992b795ca8e85a1c07b712a9cb44bca.png)



**6. Test Result**

Upload the code on development board, open serial monitor to check line tracking
sensors. And the displayed value is 1(high level) when no signals are received.
The value becomes into 0 when covering sensor with paper.

![](media/2fd58c7a9f95fb9f694edf03e755042f.png)

![](media/cbf84d96326071244835b2e691770a97.png)

1.  **Code explanation:**

Serial.begin(9600)-initialize and set baud rate to 9600

pinMode- decide if the pin mode of micron controller is input or output.

digitalRead- read the status of pin(HIGH, LOW)

1.  **Extension Practice**

After knowing its working principle, connect an LED to D3. We could control LED
by line tracking sensor.

![](media/7cee76af098561b7f521ab088f6e6da9.png)

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                           |
|-----------|-----------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_3_Line Tracking Sensor |
|           | File Name                                                       |
|           | lesson_3.2_Extension Practice                                   |

You could edit code step by step as follows:

(1) Click “Control” to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

(2) Enter “Serial Port” to move
block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)+
![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)=
![](media/ab706faf61854a4bb27663a5cac4325c.png)

1.  Go to “Variables” to drag out
    block![](media/1ae07a66a021f66804a4db9141d3e6f5.png)and copy it twice

2.  Separately change item into val_L, val_M and val_R.

3.  Go to “Math” to move out
    block![](media/0171c9b9d68df2b854ebded805ca3371.png)and replicate it twice.

Edit code string as follows:

![](media/30065ea3ea3f61f3466205d9af84a4c9.png)

1.  Go to “Variables” to drag out
    block![](media/4d36fd0b35d9982289a193bd291a1d7c.png)，

2.  Then click “Sensor” → “DigitalRead”
    →![](media/eab5fe2561c4d55749e7183e40617b1a.png)

3.  Move block![](media/eab5fe2561c4d55749e7183e40617b1a.png)into
    ![](media/4d36fd0b35d9982289a193bd291a1d7c.png)block，

4.  The line tracking sensor is linked with D6, so set to PIN 11.

5.  ![](media/934c1e894cb10d23582c68b714c1ca13.png)Replicate
    block![](media/be9d0c8f176a84ffc394eb32e2fed825.png)twice，and separately
    change val_L into val_M and val_R;

6.  The tracking sensor is also connected to D7 and D8, therefore, set to PIN 7
    and PIN 8

![](media/934c1e894cb10d23582c68b714c1ca13.png)
![](media/d2169e7c7ea5729ebadbb291f128feee.png)

1.  Click “Serial Port” to drag out
    block![](media/7f8422c9a75e8f402b51c2a003d319d9.png)，and go to “Text” to
    move block![](media/3b18dc31f0ae89a9f3149c9ef027724b.png)into
    block![](media/7f8422c9a75e8f402b51c2a003d319d9.png)，

2.  Change hello into
    left：![](media/7f8422c9a75e8f402b51c2a003d319d9.png)+![](media/3b18dc31f0ae89a9f3149c9ef027724b.png)
    =![](media/45fb5a0f82ce8c4646eac9f23a903cd5.png)

3.  Copy block![](media/7f8422c9a75e8f402b51c2a003d319d9.png)again，and
    enter“Variables”to move
    block![](media/c9ea8fe0c1d00b9b78919d7c86b64a45.png)into
    ![](media/7f8422c9a75e8f402b51c2a003d319d9.png).

4.  Replicate code ![](media/45fb5a0f82ce8c4646eac9f23a903cd5.png)once and
    delete left：， as shown below:

![](media/934c1e894cb10d23582c68b714c1ca13.png)
![](media/bbe38ba8aa5623b89a3cf06037c937a3.png)

1.  Duplicate code
    string![](media/5c50121d1aacb9a9803beb1ac0108b58.png)once，and change
    left：into middle : , val_L into val_M.

2.  Copy block![](media/99f846a695d03cfb2b8aeaa095ea5a51.png)，and alter
    left：into right：

3.  Go to“Serial Port”to drag
    out![](media/b1f7f1d1c2b65b3ebe359a9e8181ed46.png)block ，and enter
    “Variables” to drag ![](media/4a9a477e92174ae4c461fc7d73c09184.png)into
    block![](media/b1f7f1d1c2b65b3ebe359a9e8181ed46.png).

![](media/934c1e894cb10d23582c68b714c1ca13.png)
![](media/0b66d9a66fbc63fce7de2788128a3802.png)

1.  Enter“Control”to move out
    block![](media/2ca74f70e4001ad5a00d135a596025ab.png)，
    click![](media/6b0bc0755ffe368004c9ad0f73a1b573.png)to move
    block![](media/3d802292f690f8fa147d843b30f33692.png)
    into![](media/2fdb1be9af49544f385db0f5fdc0591b.png)block，
    then![](media/2ca74f70e4001ad5a00d135a596025ab.png)block turns
    into![](media/e648c3aa6f3059cc113923bc4160abcb.png).

2.  Go to “Logic” to move
    block![](media/ba4beab2225dda3e12dc06a6f193731f.png)into if block.

3.  Enter “Variables” to drag
    block![](media/c9ea8fe0c1d00b9b78919d7c86b64a45.png)into the left box of
    block“=”，click “Math” to move
    block![](media/0171c9b9d68df2b854ebded805ca3371.png)into right box
    of“=”，and change 0 into 1.

![](media/934c1e894cb10d23582c68b714c1ca13.png)
![](media/98289822eef62aa411b2ac92d018d3c6.png)

1.  Go to “sensor” → “ControlOutput”
    →![](media/aff24ef3f0c42f62d87a2ef53fdb58b2.png)

2.  Place it into do block，and set to LOW

3.  LED is linked with D3，therefore, set to PIN 9.

4.  ![](media/6946351fce7e5c88b8ddefa1417bb340.png)Copy
    block![](media/bf5df558a62bc3245dcf09c114b9fcd7.png)again and keep it into
    else

5.  Then set to HIGH, click ”Control” to move out
    block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)，and delay in 2000ms.

![](media/6946351fce7e5c88b8ddefa1417bb340.png)
![](media/6946351fce7e5c88b8ddefa1417bb340.png)
![](media/934c1e894cb10d23582c68b714c1ca13.png)
![](media/8df2fea1dd03c4664701dfa977dce95b.png)

![](media/6946351fce7e5c88b8ddefa1417bb340.png)![](media/6946351fce7e5c88b8ddefa1417bb340.png)

(27) Replicate code
string![](media/731d6cef4e31be5ce2673951c5cac153.png)twice，and
![](media/6946351fce7e5c88b8ddefa1417bb340.png)respectively set to val_M and
val_R.

![](media/584daea320b72936a5e6d5907f763f9c.png)

![](media/eb7f0bcf6b3d5169b1e89be0ac095bcb.png)

Complete Program：

\| ![](media/ea64c77775f4b029a903b79d02171a8a.png)
![](media/584daea320b72936a5e6d5907f763f9c.png)
![](media/eb7f0bcf6b3d5169b1e89be0ac095bcb.png)

Initialization Set baud rate to 9600 Set val_L to integer 0 Set val_M to integer
0 Set val_R to integer 0 Set the digital signals read by left TCRT5000 IR tube
to val_L Set the digital signals read by middle TCRT5000 IR tube to val_M Set
the digital signals read by right TCRT5000 IR tube to val_R Serial port prints
left： Serial port displays the digital signals read by left TCRT5000 IR tube
Serial port prints blank space Serial port prints middle： Serial Port shows the
digital signals read by middle TCRT5000 IR tube Serial port prints blank space
Serial port prints right： Serial port displays the digital signals read by
right TCRT5000 IR tube If the digital signal read by right TCRT5000 IR tube is
1, the program under do block will be executed. Turn off red LED If the digital
signal read by left TCRT5000 IR tube is not 1, the program under else block will
be executed. Light up red LED Delay in 2000ms If the digital signal read by
middle TCRT5000 IR tube is 1, the program under do block will be executed. LED
Turn off red LED If the condition of digital signal read by left TCRT5000 IR
tube=1 is not met, the program under else block will be executed. Delay in
2000ms If the condition of digital signal read by right TCRT5000 IR tube=1 is
met, the program under do block will be executed. LED Turn off red LED If the
condition of digital signal read by middle TCRT5000 IR tube=1 is not met, the
program under else block will be executed. Light up red LED Delay in 2000ms \|

Upload the code to development board, we could see LED light up when covering
the line tracking sensor by hand.

### Project 4: Servo Control

1.  **Description**

Servo motor is a position control rotary actuator. It mainly consists of
housing, circuit board, core-less motor, gear and position sensor. Its working
principle is that the servo receives the signal sent by MCU or receiver and
produces a reference signal with a period of 20ms and width of 1.5ms, then
compares the acquired DC bias voltage to the voltage of the potentiometer and
obtain the voltage difference output.

When the motor speed is constant, the potentiometer is driven to rotate through
the cascade reduction gear, which leads that the voltage difference is 0, and
the motor stops rotating. Generally, the angle range of servo rotation is 0°
\--180 °

The rotation angle of servo motor is controlled by regulating the duty cycle of
PWM (Pulse-Width Modulation) signal. The standard cycle of PWM signal is 20ms
(50Hz). Theoretically, the width is distributed between 1ms-2ms, but in fact,
it's between 0.5ms-2.5ms. The width corresponds the rotation angle from 0° to
180°. But note that for different brand motor, the same signal may have
different rotation angle.

![](media/69be958142b773acdae33eeef12afed7.png)

In general, servo has three line in brown, red and orange. Brown wire is
grounded, red one is positive pole line and orange one is signal line.

![](media/49467dfa70799401a5a5acc691014aee.png)

The corresponding servo angles are shown below:

![](media/ddc74f62dc936c925d28d70a1a9c2214.png)

1.  **Specification**

Working voltage: DC 4.8V \~ 6V

Operating angle range: about 180 ° (at 500 → 2500 μsec)

Pulse width range: 500 → 2500 μsec

No-load speed: 0.12 ± 0.01 sec / 60 (DC 4.8V) 0.1 ± 0.01 sec / 60 (DC 6V)

No-load current: 200 ± 20mA (DC 4.8V) 220 ± 20mA (DC 6V)

Stopping torque: 1.3 ± 0.01kg · cm (DC 4.8V) 1.5 ± 0.1kg · cm (DC 6V)

Stop current: ≦ 850mA (DC 4.8V) ≦ 1000mA (DC 6V)

Standby current: 3 ± 1mA (DC 4.8V) 4 ± 1mA (DC 6V)

1.  **Components**

![](media/928ffd98988ed31aeb19d51560fc7797.png)

1.  **Wiring Diagram**

![](media/50bf4f0c92727ccfc1603ab7666e3596.png)

Wiring note: the brown line of servo is linked with Gnd(G), the red line is
connected to 5v(V) and orange line is attached to digital 10.

The servo has to be connected to external power due to its high demand for
driving servo current. Generally, the current of development board is not
enough. If without connected power, the development board could be burnt.

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                    |
|-----------|----------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_4_Servo Control |
|           | File Name                                                |
|           | lesson_4_Servo Control                                   |

You could edit code step by step as follows:

1.  Go to“Control”to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

2.  Enter“Module”→“Drive_Module”to get
    block![](media/1302cb9a43d91d5e24b17b8b397bb526.png)and place it into
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)，

3.  The servo is linked with D10, so set to PIN 10.

4.  Set servo to 90°，and delay in 500ms.

5.  Replicate code string ![](media/6032e5f5b52f8106c8767de69e5314c9.png)for
    three times，respectively change 90 into 0, 180 and 0.

![](media/800839b405f06da330630c1d29d2c69f.png)

Complete Program：

![](media/21ee2feb5664515c5348ca877900b29b.png)

Upload code successfully and power on, servo swings in the range of 0° to 180°.

### Project 5: Ultrasonic Sensor

1.  **Description**

The HC-SR04 ultrasonic sensor uses sonar to determine distance to an object like
bats do. It offers excellent non-contact range detection with high accuracy and
stable readings in an easy-to-use package. It comes complete with ultrasonic
transmitter and receiver modules.

The HC-SR04 or the ultrasonic sensor is being used in a wide range of
electronics projects for creating obstacle detection and distance measuring
application as well as various other applications. Here we have brought the
simple method to measure the distance with Arduino and ultrasonic sensor and how
to use ultrasonic sensor wit h Arduino.

1.  **Specification**

![](media/9779999818cbbe4e1adf5b57081be431.png)

-   Power Supply :+5V DC

-   Quiescent Current : \<2mA

-   Working Current: 15mA

-   Effectual Angle: \<15°

-   Ranging Distance : 2cm – 400 cm

-   Resolution : 0.3 cm

-   Measuring Angle: 30 degree

-   Trigger Input Pulse width: 10uS

1.  **Components**

![](media/ad011fea1ae0f2757ae9c68e7f67ccaa.png)

1.  **The principle of ultrasonic sensor**

As the above picture shown, it is like two eyes. One is transmitting end, the
other is receiving end.

The ultrasonic module will emit the ultrasonic waves after trigger signal. When
the ultrasonic waves encounter the object and are reflected back, the module
outputs an echo signal, so it can determine the distance of object from the time
difference between trigger signal and echo signal.

The t is the time that emitting signal meets obstacle and returns.

and the propagation speed of sound in the air is about 343m/s, therefore,
distance = speed \* time, because the ultrasonic wave emits and comes back,
which is 2 times of distance, so it needs to be divided by 2, the distance
measured by ultrasonic wave = (speed \* time)/2

1.  Use method and timing chart of ultrasonic module:

2.  Setting the delay time of Trig pin of SR04 to 10μs at least, which can
    trigger it to detect distance.

3.  2\. After triggering, the module will automatically send eight 40KHz
    ultrasonic pulses and detect whether there is a signal return. This step
    will be completed automatically by the module.

4.  3\. If the signal returns, the Echo pin will output a high level, and the
    duration of the high level is the time from the transmission of the
    ultrasonic wave to the return.

![](media/ba43be6007d9fe3aab0bb609868af640.png)


Circuit diagram of ultrasonic sensor:

![](media/a25028af84d6c7c94382c2a907101241.jpeg)

1.  **Connection Diagram**

**![](media/746e1a27cbb0b4ea314fa2cf18f98442.png)**

Wiring guide:

Ultrasonic sensor keyestudio V5 sensor shield

VCC → 5v(V)

Trig → 12(S)

Echo → 13(S)

Gnd → Gnd(G)

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                       |
|-----------|-------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_5_Ultrasonic Sensor |
|           | File Name                                                   |
|           | lesson_5.1_Ultrasonic Sensor                                |

You could edit code step by step as follows:

1.  Click“Control”module to get
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

2.  Enter“Serial Port”to move
    block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into
    ![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)block.

![](media/ab706faf61854a4bb27663a5cac4325c.png)

1.  Go to“Variables” to get
    block![](media/1ae07a66a021f66804a4db9141d3e6f5.png)and copy it twice.
    Respectively change item into distance 1 and distance 2.

(4) Click“Math” to move out
block![](media/0171c9b9d68df2b854ebded805ca3371.png)and replicate it twice.
![](media/57c14206426c33316cfee574abd253a8.png)

(5) Click “Variables” to drag out
block![](media/4f02d1456bb0ed46714e9e8f0e9bc88c.png)，and enter “sensor” →
“OtherSensor” →.![](media/e067dfd9bf593120e3723b1f3b108e73.png)

(6) Combine block![](media/4f02d1456bb0ed46714e9e8f0e9bc88c.png) with block
![](media/e067dfd9bf593120e3723b1f3b108e73.png)，

(7) Trig pin of ultrasonic sensor is connected to D12(S) of shield，Echo is
attached to D13(S)，so set Trig 12 and Echo 13.

![](media/c0a6037cbd4c21df34e402e9efc32f34.png)

(8) Click“Variables”to get
block![](media/dc7e1886ece9baf966a574d5fa53af9f.png)，and drag
out![](media/8a4501800a666650f1d30c5c607de7e6.png) from“Math” and keep it behind
block![](media/dc7e1886ece9baf966a574d5fa53af9f.png).

(9) Go to“Variables” to move out
block![](media/63bd47f41b8c51c393507f0dee65fe46.png)left 1 box“.

(10) Then change another 1 into 0.3937，and set to“×”.

![](media/a3d3b610f7aa93b3222195464b7aeeef.png)

(11) Go to“Serial Port ” to drag out
block![](media/f2f487f178408e3b391d083c82c1cd8d.png)，and click “Variables” to
get block![](media/795097919b1070a5a9cc46632e8e5196.png).

(12) Combine ![](media/795097919b1070a5a9cc46632e8e5196.png) with
![](media/f2f487f178408e3b391d083c82c1cd8d.png)

![](media/7d7376f708980ab37b11e45eeb2f1956.png)

(13) Go to “Serial Port” to get
block![](media/f2f487f178408e3b391d083c82c1cd8d.png)，then click “Text” module
to drag block![](media/05e706fdf44ad085940a3211232eb8fb.png)into
![](media/f2f487f178408e3b391d083c82c1cd8d.png)，and change hello into in.

![](media/b71b36593d95bf43a6bdda87b618477c.png)

(14) Copy code string![](media/51d888a53b890075890ae1eee8d16cca.png)once，change
distance2 into distance1，in into cm

![](media/6e88e9ce396a55aef3112564f357319a.png)

(15) Click“Control”to get
block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)，delay in 50ms.
![](media/86721d54029407a74113e120542fc2ff.png)

(16) Click“Control”to get
block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)，delay in 50ms.

![](media/86721d54029407a74113e120542fc2ff.png)

Complete Program：

![](media/b5d88633cd0e70c4ae8ca378609c76fb.png)

1.  **Extension Practice：**

We have measured the distance displayed by ultrasonic sensor. How about
controlling the LED with the measured distance? Let's try it, connect an LED
light module to the D3 pin.

![](media/7c9080faa78c26b7de5e548b159dda45.png)

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                       |
|-----------|-------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_5_Ultrasonic Sensor |
|           | File Name                                                   |
|           | lesson_5.2_Extension Practice                               |

You could edit code step by step as follows:

1.  Enter“Control” to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

(2) Click“Serial Port” to drag out
block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

![](media/ab706faf61854a4bb27663a5cac4325c.png)

(3) Go to“Variables” to move out
block![](media/1ae07a66a021f66804a4db9141d3e6f5.png)and copy it twice.

(4) Enter“Math” to drag out
block![](media/0171c9b9d68df2b854ebded805ca3371.png)and replicate twice, and
change item into distance 1 and distance 2.

(5) Edit the code string as follows:

![](media/57c14206426c33316cfee574abd253a8.png)

(6) Go to “Variables” to move
out![](media/4f02d1456bb0ed46714e9e8f0e9bc88c.png)block，then click“sensor”→
“OtherSensor” →![](media/e067dfd9bf593120e3723b1f3b108e73.png)

(7) Combine it with block![](media/4f02d1456bb0ed46714e9e8f0e9bc88c.png)，the
pin Trig of ultrasonic sensor is linked with D12(S) of expansion board, pin Echo
is attached to D13(S); therefore, click the triangle button to select 12 and 13.

![](media/c0a6037cbd4c21df34e402e9efc32f34.png)

(8) Click“Variables” to get
block![](media/dc7e1886ece9baf966a574d5fa53af9f.png)，and drag
out![](media/8a4501800a666650f1d30c5c607de7e6.png) from “Math” and keep it
behind block![](media/dc7e1886ece9baf966a574d5fa53af9f.png).

(9) Go to“Variables” to move out
block![](media/63bd47f41b8c51c393507f0dee65fe46.png)left 1 box“.

Then change another 1 into 0.3937，and set to “×”.

![](media/a3d3b610f7aa93b3222195464b7aeeef.png)

![](media/7d7376f708980ab37b11e45eeb2f1956.png)

(10) Go to “Serial Port ” to drag out
block![](media/f2f487f178408e3b391d083c82c1cd8d.png)，and click “Variables” to
get block![](media/795097919b1070a5a9cc46632e8e5196.png).

(11) Combine ![](media/795097919b1070a5a9cc46632e8e5196.png) with
![](media/f2f487f178408e3b391d083c82c1cd8d.png)

![](media/7d7376f708980ab37b11e45eeb2f1956.png)

(12) Go to “Serial Port” to get
block![](media/f2f487f178408e3b391d083c82c1cd8d.png)，then click “Text” module
to drag block![](media/05e706fdf44ad085940a3211232eb8fb.png)into
![](media/f2f487f178408e3b391d083c82c1cd8d.png)，and change hello into in.

![](media/b71b36593d95bf43a6bdda87b618477c.png)

(13) Replicate code string
![](media/51d888a53b890075890ae1eee8d16cca.png)once，and change distance2 into
distance1，and in into cm.

(14) Go to“Control”to move out
block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)and delay in 50ms

![](media/86721d54029407a74113e120542fc2ff.png)

(15) Click“Control” and drag it into
block![](media/fad4c0aa5b58d92bf0269099face7f63.png)，
click![](media/6b0bc0755ffe368004c9ad0f73a1b573.png)and
move![](media/4df0c9deaa8baeddd3a9047381c333bb.png)into
![](media/ec67799ae6a24d7f0bc062e6efad352e.png)then we get
block![](media/1ecffbd539806a583d03347c7aa5a77a.png).

(16) Go to “Logic” to get ![](media/f1a063334f9c7f82ff4903fa84b9eebc.png) and
![](media/ba4beab2225dda3e12dc06a6f193731f.png).

(17) Place ![](media/f1a063334f9c7f82ff4903fa84b9eebc.png)into if block，and
leave ![](media/ba4beab2225dda3e12dc06a6f193731f.png) in the left box of
block![](media/f1a063334f9c7f82ff4903fa84b9eebc.png).

(18) Enter“Variables” to get
block![](media/63bd47f41b8c51c393507f0dee65fe46.png) and keep it at left box of
block “=”.

(19) Go to “Math” to move out![](media/0171c9b9d68df2b854ebded805ca3371.png)into
right box of block “=”，and change 0 into 2, “=” into “≥”.

(20) Replicate block![](media/98d62e267e0aeac3ce97b877ad34f782.png)once and set
![](media/533d83ffc6ebcab86afd0c659713e15e.png)

![](media/c40ca3725ccda8e28e7e5178326b69fc.png)

(21) Go to“Control”to move out
block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)and delay in 50ms

![](media/86721d54029407a74113e120542fc2ff.png)

(22) Click“Control”and drag it into
block![](media/fad4c0aa5b58d92bf0269099face7f63.png)，
click![](media/6b0bc0755ffe368004c9ad0f73a1b573.png)and
move![](media/4df0c9deaa8baeddd3a9047381c333bb.png)into
![](media/ec67799ae6a24d7f0bc062e6efad352e.png)then we get
block![](media/1ecffbd539806a583d03347c7aa5a77a.png).

(23) Go to “Logic” to get ![](media/f1a063334f9c7f82ff4903fa84b9eebc.png) and
![](media/ba4beab2225dda3e12dc06a6f193731f.png).

(24) Place ![](media/f1a063334f9c7f82ff4903fa84b9eebc.png)into if block，and
leave ![](media/ba4beab2225dda3e12dc06a6f193731f.png) in the left box of
block![](media/f1a063334f9c7f82ff4903fa84b9eebc.png).

(25) Enter “Variables” to get
block![](media/63bd47f41b8c51c393507f0dee65fe46.png) and keep it at left box of
block“=”.

(26) Go to“Math” to move out![](media/0171c9b9d68df2b854ebded805ca3371.png)into
right box of block “=”，and change 0 into 2, “=”into“≥”.

(27) Replicate block![](media/98d62e267e0aeac3ce97b877ad34f782.png)once and set
![](media/533d83ffc6ebcab86afd0c659713e15e.png)

(28) Click “sensor”
→“ControlOutput”→![](media/aff24ef3f0c42f62d87a2ef53fdb58b2.png)and place it
into do block，

(29) The S end of LED Module is connected to D3 of expansion board，therefore,
click the triangle button to select 3.

(30) ![](media/8f6193438ea00133d2335be2c9d2946a.png)Replicate
block![](media/cbad7bb7e28d444164291ff444759668.png)once and leave it into
“else” and set to LOW.

![](media/345df978da6ec3e14c59f7f6ded5d3e9.png)

Complete Program：

![](media/345df978da6ec3e14c59f7f6ded5d3e9.png)

Upload test code to development board and block ultrasonic sensor by hand, then
check if LED is on

1.  **Test Result：**

Upload test code on the development board, open serial monitor and set baud rate
to 9600. The detected distance will be displayed, the unit is cm and inch.
Hinder the ultrasonic sensor by hand, the displayed distance value gets smaller.

![](media/db57c5b23e2d6dd41ad70d6331297262.png)

**Project 6: IR Reception**

1.  **Description**

There is no doubt that infrared remote control is ubiquitous in daily life. It
is used to control various household appliances, such as TVs, stereos, video
recorders and satellite signal receivers. Infrared remote control is composed of
infrared transmitting and infrared receiving systems, that is, an infrared
remote control and infrared receiving module and a single-chip microcomputer
capable of decoding.​

The 38K infrared carrier signal emitted by remote controller is encoded by the
encoding chip in the remote controller. It is composed of a section of pilot
code, user code, user inverse code, data code, and data inverse code. The time
interval of the pulse is used to distinguish whether it is a 0 or 1 signal and
the encoding is made up of these 0, 1 signals.

The user code of the same remote control is unchanged. The data code can
distinguish the key.

When the remote control button is pressed, the remote control sends out an
infrared carrier signal. When the IR receiver receives the signal, the program
will decode the carrier signal and determines which key is pressed. The MCU
decodes the received 01 signal, thereby judging what key is pressed by the
remote control.

Infrared receiver we use is an infrared receiver module. Mainly composed of an
infrared receiver head, it is a device that integrates reception, amplification,
and demodulation. Its internal IC has completed demodulation, and can achieve
from infrared reception to output and be compatible with TTL signals.
Additionally, it is suitable for infrared remote control and infrared data
transmission. The infrared receiving module made by the receiver has only three
pins, signal line, VCC and GND. It is very convenient to communicate with
arduino and other microcontrollers.

![](media/3a87e791473f2a87ebd5780154a929ba.png)![](media/3434d75335432418ecff2bd64df180bd.png)

1.  **Specification**

Operating Voltage: 3.3-5V（DC）

Interface: 3PIN

Output Signal: Digital signal

Receiving Angle: 90 degrees

Frequency: 38khz

Receiving Distance: 10m

1.  **Components**

![](media/5e187cd2de355e6be2c93fbf7e81eaa1.png)

1.  **Connection Diagram**

![](media/c9446c40a81aa7347e3c490c189dc7c6.png)

Respectively link “-”, “+” and S of IR receiver module with G(GND）, V（VCC）and
A0 of keyestudio development board.

Attention: On the condition that digital ports are not available, analog ports
can be regarded as digital ports. A0 equals to D14, A1 is equivalent to digital
15.

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                   |
|-----------|---------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_6_IR Reception |
|           | File Name                                               |
|           | lesson_6.1_IR Reception                                 |

You could edit code step by step as follows:

(1) Enter “Control” Module to get
block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

(2) Click “Serial Port”Module to drag
block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into
![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)block.

![](media/ab706faf61854a4bb27663a5cac4325c.png)

(3) Go to
“Module”→”Communicate_Module”→![](media/96059aeedab32910761af0731f9c3bae.png)，

(4) Signal end of IR receiver module is connected to A1 of shield, therefore,
click triangle button to select A0.

![](media/9aa4bc5dded5e1a2f78669736e036323.png)
![](media/a80bbf1cd70dcc3b386008b048d97931.png)

(5) Click “Control” Module，to
move![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)out, delay in 100ms

![](media/9aa4bc5dded5e1a2f78669736e036323.png)
![](media/9d35dd86d1c12d8327c4aa3ab89c749a.png)

Complete Program：

![](media/9aa4bc5dded5e1a2f78669736e036323.png)
![](media/24768c0f2cb74e95d6075cb7c60b1280.png)


1.  **Test Result**

Upload test code, open serial monitor and set baud rate to 9600, point remote
control to IR receiver and the corresponding value will be shown, if pressing so
long, the error codes will appear.

![](media/92887b989e103ef082569bbb34817852.png)

Below we have listed out each button value of keyestudio remote control. So you
can keep it for reference.

![](media/ebcf0cb2055f7784505f76ceeaef9f47.jpeg)

1.  **Extension Practice:**

We decoded the key value of IR remote control. How about controlling LED by the
measured value? We could operate an experiment to affirm. Attach an LED to D3,
then press the keys of remote control to make LED light up and off.

![](media/72c3128aef5346425a02723f6ebe73ec.png)

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                   |
|-----------|---------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_6_IR Reception |
|           | File Name                                               |
|           | lesson_6.2_Extension Practice                           |

You could edit code step by step as follows:

1.  Enter“Control”module to get
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

2.  Go to“Serial Port”to move out
    block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

3.  ![](media/ab706faf61854a4bb27663a5cac4325c.png)

4.  Go to
    ”Module”→”Communicate_Module”→![](media/96059aeedab32910761af0731f9c3bae.png)

5.  S end of IR receiver module is linked with A0. therefore, click triangle
    button to set A0.

![](media/9aa4bc5dded5e1a2f78669736e036323.png)
![](media/a80bbf1cd70dcc3b386008b048d97931.png)

1.  Go to “Variables” to move
    block![](media/1ae07a66a021f66804a4db9141d3e6f5.png)into
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)，

2.  Go to“Math”to drag out
    block![](media/0171c9b9d68df2b854ebded805ca3371.png)and integrate with
    ![](media/1ae07a66a021f66804a4db9141d3e6f5.png), then change item into a.

![](media/c05b35646e33af01ea62e8a614b36588.png)

1.  Click “Control”module to get
    block![](media/2ca74f70e4001ad5a00d135a596025ab.png)，
    click![](media/6b0bc0755ffe368004c9ad0f73a1b573.png)，
    move![](media/71afebb5c9a2069d14dd8df25d384542.png)into
    ![](media/c1c89bf3006d0dc7f8b4c81de0ed817f.png)block，
    then![](media/2ca74f70e4001ad5a00d135a596025ab.png)turns
    into![](media/3956e6943d009077242fe93002233341.png)block.

2.  Go to “Logic”，and find out
    block![](media/f1a063334f9c7f82ff4903fa84b9eebc.png). Leave it behind if
    block

3.  Go to“Logic” to place![](media/ba4beab2225dda3e12dc06a6f193731f.png)in the
    left box.

4.  Click“Variables” to move ![](media/6c120acad5ab3b20f027c326656b2f2d.png)in
    the left box of“=” block，go to“Math” to drag
    out![](media/0171c9b9d68df2b854ebded805ca3371.png)into right box of
    “=”，then change 0 into 0xFF02FD.

5.  Copy![](media/0370b3d4646a039e4d86bbfb7ff13e34.png)once and keep it into
    right box of ”and” block，change ir_item into a，0xFF02FD into 0.

![](media/9aa4bc5dded5e1a2f78669736e036323.png)
![](media/2da16328defb5bf7ac8d4ebe630e0923.png)

1.  Click “sensor”→
    “ControlOutput”→![](media/aff24ef3f0c42f62d87a2ef53fdb58b2.png)

2.  Keep it into the first do block，S end of red LED module is linked with D3
    of expansion board，and set to Pin 3.

![](media/b7247305a4be3ec0df9114773195349e.png)![](media/9aa4bc5dded5e1a2f78669736e036323.png)
![](media/b5239f68922bf76e096eb99269c09ead.png)

1.  Go to“Variables”to move
    ![](media/2f3c35140a54edfff47c9b246c6056a3.png)below“Red_LED...HIGH”block.

2.  Click“Math” to get block![](media/0171c9b9d68df2b854ebded805ca3371.png)
    into![](media/2f3c35140a54edfff47c9b246c6056a3.png)，and change 0 into 1.

![](media/9aa4bc5dded5e1a2f78669736e036323.png)![](media/b7247305a4be3ec0df9114773195349e.png)
![](media/890e2cb094f3d083e1faeaf52eb1a88c.png)

1.  Replicate![](media/21dceda1bee34f5fd94b0a098d6c171a.png) once and move into
    “else if”, change 0 into 1.

![](media/9aa4bc5dded5e1a2f78669736e036323.png)![](media/b7247305a4be3ec0df9114773195349e.png)
![](media/75dfc90cd300d6ada0b58fb119dd5193.png)

1.  ![](media/b7247305a4be3ec0df9114773195349e.png)Replicate code
    string![](media/4b100a3f4e9f523fd2b1979dea83c049.png)once and place it into
    second do block.

2.  Click“HIGH”into“LOW”，1 into 0.

![](media/9aa4bc5dded5e1a2f78669736e036323.png)
![](media/b7247305a4be3ec0df9114773195349e.png)
![](media/b7247305a4be3ec0df9114773195349e.png)
![](media/6c5c9e9a5009997e1070796708a84f24.png)

Complete Program：

![](media/9aa4bc5dded5e1a2f78669736e036323.png)
![](media/c4b5da44078ac02f7f062511dc88c8ea.png)

Upload code to development board, press “OK” key on remote control to make LED
on and off.

**Project 7: Bluetooth Remote Control**

1.  **Description**

Bluetooth, a simple wireless communication module most popular since the last
few decades and easy to use are being used in most of the battery-powered
devices.

![](media/3920253c86188ac64cf9b82c0df6c941.png)Over the years, there have been
many upgrades of Bluetooth standard to keep fulfil the demand of customers and
technology according to the need of time and situation.

Over the few years, there are many things changed including data transmission
rate, power consumption with wearable and IoT Devices and Security System.

Here we are going to learn about HM-10 BLE 4.0 with Arduino Board. The HM-10 is
a readily available Bluetooth 4.0 module. This module is used for establishing
wireless data communication. The module is designed by using the Texas
Instruments CC2540 or CC2541 Bluetooth low energy (BLE) System on Chip (SoC).

1.  **Parameters**

![](media/698ae05d05c7378653606387991ad1c2.png)

Bluetooth protocol: Bluetooth Specification V4.0 BLE

No byte limit in serial port Transceiving

In open environment, realize 100m ultra-distance communication with iphone4s

Working frequency: 2.4GHz ISM band

Modulation method: GFSK(Gaussian Frequency Shift Keying)

Transmission power: -23dbm, -6dbm, 0dbm, 6dbm, can be modified by AT command.

Sensitivity: ≤-84dBm at 0.1% BER

Transmission rate: Asynchronous: 6K bytes ; Synchronous: 6k Bytes

Security feature: Authentication and encryption

Supporting service: Central & Peripheral UUID FFE0, FFE1

Power consumption: Auto sleep mode, stand by current 400uA~800uA, 8.5mA during
transmission.

Power supply: 5V DC

Working temperature: –5 to +65 Centigrade

1.  **Components**

![](media/dda269e4743553befcd72e97786b194b.png)

![](media/e9c84ec9c1c91febe793e615364ea860.png)

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                            |
|-----------|---------------------------------------------------------------- -|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_7_Bluetooth Remote Control
|           | File Name                                                        |
|           | lesson_7.1_Bluetooth Remote Control                              |

You could edit code step by step as follows:

1.  Click “Control”to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

2.  Enter “Serial Port”to move
    block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)+
![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)=
![](media/ab706faf61854a4bb27663a5cac4325c.png)

1.  Click “Variables” to drag out
    ![](media/1ae07a66a021f66804a4db9141d3e6f5.png)
    into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)， enter“Math” block to
    get block ![](media/0171c9b9d68df2b854ebded805ca3371.png).

2.  Place it behind “value”，and change item into ble_val，click the drop-down
    triangle button to select char.

![](media/7f31ab21d82a4e3b53f61226eccfe92f.png)

1.  Go to “Control” to get
    block![](media/2ca74f70e4001ad5a00d135a596025ab.png)，and click “Serial
    Port” to move out block![](media/1f87abf3c6ac4fbadf1e234e76a8aefd.png)into
    if block.

![](media/e79f4c4583c686d756bf777d54abef20.png)

1.  Enter “Variables” to drag out
    block![](media/4615c6b7c93add0fe05558f27c8bbf00.png)into do block，click
    “Serial Port” to move out block
    ![](media/35c893d098bc538139d7dfd6ecc560d6.png) into
    ![](media/4615c6b7c93add0fe05558f27c8bbf00.png) block.

![](media/262ecdaead6e3f8a1623400d4c0f25e2.png)

1.  Enter “Serial Port” to move
    block![](media/c5b6ffacfdbd75150684d2e7744fa9bc.png) into do block，then
    click “Variables” to drag out
    ![](media/66c33076d8003c5b40d8da950b5c6240.png)into
    block![](media/c5b6ffacfdbd75150684d2e7744fa9bc.png).

![](media/e8c82f72421db068e1e51ce4c6870104.png)

Complete Program：

![](media/1dccac0d10235835664c8b58c80a0355.png)


(There will be contradiction between serial communication of code and
communication of Bluetooth when uploading code, therefore, don’t link with
Bluetooth module before uploading code.)

After uploading code on development board, then insert Bluetooth module, wait
for the command from cellphone.

1.  **Download the APP**

The code is the received signal by serial monitor, in this project, we send
signal to control robot car via cellphone.

Then we need to download the APP.

1.  **iOS system**

**Note: Allow APP to access “location” in settings of your cellphone when
connecting to Bluetooth module, otherwise, Bluetooth may not be connected.**

Enter APP STORE to search **BLE Scanner 4.0, then download it.**

![](media/1e7081e38b12fee16c01d368ee3428fd.png)

**2. Android system**

Enter [Google Play](https://developer.android.google.cn/distribute?hl=zh-cn) to
find out **BLE Scanner and download.**

**(Enable“location”in settings of your cellphone, otherwise, app may not be
searched.)**

![](media/cf5e6cd8b98346d3e90faf4a10e92dc1.png)

3\. After installation, open App and enable“Location and Bluetooth” permission.

4\. Open App, the name of Bluetooth module is HMSoft.

Then click “connect” to link with Bluetooth

![](media/cc2ad4236eb001676ae447e8033edd2f.png)

1.  After connecting to HMSoft, click it to get multiple options, such as device
    information, access permission, general and custom service. Choose “CUSTOM
    SERVICE”

![](media/c96a93021bc5cf13bb92248c9db8096e.jpeg)

1.  Then pop up the following page.

![](media/f74e64f9f29e0813db44971d2896d7f2.png)

7\. Click（Read,Notify,WriteWithoutResponse)to enter the following page

![](media/c769ffa7b68eb36516a429147d5f65b6.png)

8\. Click **Write Value to enter HEX or Text.**

![](media/d8afcda78947d9fc25d41cc16a182369.png)

1.  Open the serial monitor on Arduino，enter a 0 or other character on Text
    interface.

![](media/767ed0b7d1876e63ff109d8a355209ac.png)

1.  Then click “Write”, open serial monitor to view if there is a “0” signal

![](media/5254b35b30451fc6dbf7de998cf5e16b.png)

(7) Extension Practice

We could send a command via Bluetooth to turn on and off a LED.

D3 is connected to a LED, as shown below:

![](media/cd4b6112e9a5a7cd6dba8560e82a1dc5.png)

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                              |
|-----------|--------------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_7_Bluetooth Remote Control |
|           | File Name                                                          |
|           | lesson_7.2_Extension Practice                                      |

You could edit code step by step as follows:

1.  Click“Control” to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

2.  Enter“Serial Port”to move
    block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

3.  Click“Variables” to move
    block![](media/1ae07a66a021f66804a4db9141d3e6f5.png)into
    ![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)block，then go to “Math” to
    find out![](media/0171c9b9d68df2b854ebded805ca3371.png)，

4.  Combine ![](media/1ae07a66a021f66804a4db9141d3e6f5.png)with
    ![](media/0171c9b9d68df2b854ebded805ca3371.png)and change item into i.

![](media/88ca5fbbbaac4f042b99981fffa0cc1b.png)

1.  Click “Control” to get
    block![](media/2ca74f70e4001ad5a00d135a596025ab.png)，and enter “Serial
    port”to move![](media/1f87abf3c6ac4fbadf1e234e76a8aefd.png)into if block.

![](media/e79f4c4583c686d756bf777d54abef20.png)

1.  Go to“Variables”to drag
    block![](media/1feb00be959378a6ea2ec6580a4965bd.png)into do block，

2.  Enter “Serial port”to move
    out![](media/35c893d098bc538139d7dfd6ecc560d6.png)block and edit code string
    as follows:

![](media/9367806c20fb3f3eb0a49501a4c5a89c.png)

1.  Enter“Serial port” to drag
    out![](media/c5b6ffacfdbd75150684d2e7744fa9bc.png)，

2.  Click“Text”to move out![](media/ee1758296e24627c48d5207171c160b6.png)into
    ![](media/c5b6ffacfdbd75150684d2e7744fa9bc.png)block，and change “hello”into
    DATA RECEIVED：.

![](media/d1065384adcd0f7f2cbe853d334630cc.png)

1.  Click“Control”to move out
    block![](media/2ca74f70e4001ad5a00d135a596025ab.png)into do，click “Logic”
    to move![](media/a4c954b2483cfdf0130916768d69f56e.png)block into if，

2.  Enter “Variables” to move
    ![](media/7c12efbf3f0e9e6d8473c96374003e14.png)into left box of “=”，then
    enter “Text” to get block![](media/a3e5bd1b881a89edee91f44d22ff0640.png)and
    leave it into right box“=”，change a into 1.

![](media/f1acdb9da0a979f252eff728fed7447d.png)

1.  Enter“Sensor”→“ControlOutput”→![](media/aff24ef3f0c42f62d87a2ef53fdb58b2.png)

2.  Drag it into the second do block，S end of red LED is connected to D3,
    therefore, set to Pin 3.

![](media/ff96e8cd71f17ba598126d359319a21a.png)
![](media/a07d1e60a27e3a76cd040c07005caf28.png)

1.  Replicate![](media/53a5ad7e8d90f73bff7a05ed2c95ef00.png)once and place it
    into the second do block. Change DATA RECEIVED：into led on.

![](media/ff96e8cd71f17ba598126d359319a21a.png)
![](media/98e9b07c84711a2dcee1946857de5b88.png)

1.  ![](media/ff96e8cd71f17ba598126d359319a21a.png)Copy code
    string![](media/e8382851e1819961f9ad95b50521c7fc.png)once and change 1 into
    0，click “HIGH” to select “LOW”，and change led on into led off.

![](media/ff96e8cd71f17ba598126d359319a21a.png)![](media/ff96e8cd71f17ba598126d359319a21a.png)
![](media/49c701bc8071689221dfe8e9c63c19b5.png)

Complete Program：

![](media/ecdd570161de56394d1650fcbdd8b8bf.png)


![](media/7ca5796ab9faf4a9513da8bf8d0c1104.png)![](media/767ed0b7d1876e63ff109d8a355209ac.png)

Click “Write” on APP, when you enter 1, LED will be on, when you input 0, LED
will be off. (Remember to remove the Bluetooth module after finishing
experiment, otherwise, burning code will be affected)

**Hook-up diagram**

**1. STATE:** *state test pins, connected to internal LED, generally keep it
unconnected.*

**2. RXD:** *serial interface, receiving terminal.*

**3. TXD:** *serial interface, transmitting terminal.*

**4. GND:** *Ground.*

**5. VCC:** *positive pole of the power source.*

**6. EN/BRK:** *break connect, it means breaking the Bluetooth connection,
generally, keep it unconnected.*

**Pay attention to the pin direction when inserting Bluetooth module, and don’t
insert it before uploading test code**

### Project 8: Motor Driving and Speed Control

1.  **Description**

There are many ways to drive the motor. Our robot car uses the most commonly
used L298P solution. L298P is an excellent high-power motor driver IC produced
by STMicroelectronics. It can directly drive DC motors, two-phase and four-phase
stepping motors. The driving current up to 2A, and output terminal of motor
adopts eight high-speed Schottky diodes as protection.

We designed a shield based on the circuit of L298p.

The stacked design reduces the technical difficulty of using and driving the
motor.

1.  **![](media/0bc64f1a3c7064c247237ee5253fb673.jpeg)
    ![](media/810e72336dd7b4d7fe595c5722b8e355.jpeg) Specification**

2.  Logic part input voltage: DC5V

3.  Driving part input voltage: DC 7-12V

4.  Logic part working current: \<36mA

5.  Driving part working current: \<2A

6.  Maximum power dissipation: 25W (T=75℃)

7.  Working temperature: -25℃～＋130℃

8.  Control signal input level: high level 2.3V\<Vin\<5V, low level
    \-0.3V\<Vin\<1.5V

**3. Drive Robot to Move**

Through the above diagram, the direction pin of B motor is D4, and speed pin is
D5; D2 is the direction pin of A motor, D9 is speed pin.

PWM decides 2 motors to rotate so as to drive robot car. The PWM value is in the
range of 0-255, the larger the number, the faster the motor rotates.

|                 | D2   | D6 (PWM） | Motor（A）           |
|-----------------|------|-----------|----------------------|
| Go forward      | LOW  | 200       | Rotate clockwise     |
| Go back         | HIGH | 200       | Rotate anticlockwise |
| Rotate to left  | HIGH | 200       | Rotate anticlockwise |
| Rotate to right | LOW  | 200       | Rotate clockwise     |
| Stop            | /    | 0         | Stop                 |
|                 |      |           |                      |
| Go forward      | D4   | D5 PWM    | Motor（B）           |
| Go back         | LOW  | 200       | Rotate clockwise     |
| Rotate to left  | HIGH | 200       | Rotate anticlockwise |
| Rotate to right | LOW  | 200       | Rotate clockwise     |
| Stop            | HIGH | 200       | Rotate anticlockwise |
| Go forward      | /    | 0         | Stop                 |
| Go back         | D4   | D5 PWM    | Motor（B）           |

**4. Components**

![](media/e08e07b9864fd1a9e1094dd28550b9e9.png)

**5. Connection Diagram**

![](media/705ebdc73ea2cfdae5b6ab409981a62f.png)

**6. Test Code：**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                                     |
|-----------|---------------------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_8_Motor Driving and Speed Control |
|           | File Name                                                                 |
|           | lesson_8.1_Motor Driving and Speed Control                                |

You could edit code step by step as follows:

(1)Click “Control” to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

(2) Go to
”Module”→”Drive_Module”→![](media/464a82194a287172b7f86e7270358b98.png)，

(3) Place it into ![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)block，

(4) The direction pin and speed control pin of B motor(left) are connected to D4
and D5. So set PIN 4 and PIN 5 as follows:

![](media/896963073472f0e53303b23e969dce42.png)

(5) Copy![](media/cc67e2e605679c2146ad507f7bdef509.png)once and place it into
block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)，

(6) The direction pin and speed control pin of A motor (right) are connected to
D2 and D9. So set PIN 2 and PIN 9 as follows:

![](media/26677d4bb17c9b5b5a776a6af7cbe430.png)![](media/70663f88652c5da777782231020d64d4.png)

1.  ![](media/26677d4bb17c9b5b5a776a6af7cbe430.png)Duplicate code string
    ![](media/799321df9593e10500b134c9e8358e9b.png)once, set INA to HIGH and PWB
    to 200：

![](media/26677d4bb17c9b5b5a776a6af7cbe430.png)
![](media/2eb7d00887a1db20a4118ba19556f53b.png)

1.  Click “Control” to move out
    block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)，delay in 2000ms.

![](media/26677d4bb17c9b5b5a776a6af7cbe430.png)
![](media/516ed31d685ab3cf4be8a580c313647a.png)

1.  ![](media/26677d4bb17c9b5b5a776a6af7cbe430.png)Replicate
    ![](media/516ed31d685ab3cf4be8a580c313647a.png)for four times，then set the
    code string as follows:

![](media/f8e50b1a459ecaab4d0f60101f42b8be.png)

Complete Program：

![](media/03f57bcb4e012feafd8da3986872c94c.png)


1.  **Test Result**

Hook up by connection diagram, upload code and power on, smart car goes forward
and back for 2s, turns left and right for 2s, stops for 2s and alternately.

1.  **Extension Practice**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                                      |
|-----------|----------------------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_8_Motor Driving and Speed Control |
|           | File Name                                                                  |
|           | lesson_8.2_Extension Practice                                              |

You could edit code step by step as follows:

Complete Program：

![](media/7866947bfe2d58e98495d92ef0a7d5e5.png)


Upload code successfully, the motors rotate slower.

### Project 9: 8*8 LED Board

![](media/39e7674b01eff873f44f6c9bde810d62.png)

1.  **Description：**

A fun way to make a small display is to use an 8x8 matrix or a 4-digit 7-segment
display. Matrices like these are 'multiplexed' - to control 64 LEDs you need 16
pins. That's a lot of pins, and there are driver chips like the MAX7219 that can
control a matrix for you, but there's a lot of wiring to set up and they take up
a ton of space. After all, wouldn't it be awesome if you could control a matrix
without tons of wiring?

We control and drive 8\*8 LED Board by HT16K33 chip, which is convenient for
wiring and greatly save the resources of microcontroller.

1.  **Components**

![](media/29c96104108c351e9025820c343d4488.png)

**![](media/1bf7d5e8aad5a25b02212d6c20ac17a8.jpeg)8\*8 Dot Matrix**

Composed of LED emitting tube diodes, LED dot matrix are applied widely to
public information display like advertisement screen and bulletin board, by
controlling LED to show words, pictures and videos, etc.

Divided into single-color, double-color, and three-color lights according to
emitting color , LED dot matrix could show red, yellow, green and even true
color.

There are 4×4, 8×8 and 16×16 different types matrix.

8×8 dot matrix contains 64pcs LEDs.

The inner structure of 8×8 dot matrix is shown below.

![](media/df08c3a7c84497e429ce6fde7253d9b3.jpeg)

Every LED is installed on the cross point of row line and column line. When the
voltage on some line increases, and the voltage on some column line is reduced,
the LED on the cross point will light up. 8×8 dot matrix has 16 pins. Put the
silk-screened side down and the anticlockwise numbers are 1,8, 9 and 16.

![](media/6576aff8e8a7fb35335629c2f60de29b.jpeg)

The definition inner pins are shown below:

![](media/4b98c449bae6648d7719a58d9ab2efa7.jpeg)

For instance, to light up the LED on row 1 and column 1, increase the voltage of
pin 9 and reduce the voltage of pin 13.

1.  **HT16K33 8X8 Dot Matrix**

The HT16K33 is a memory mapping and multi-purpose LED controller driver. The
max. Display segment numbers in the device is 128 patterns (16 segments and 8
commons) with a 13\*3 (MAX.) matrix key scan circuit. The software configuration
features of the HT16K33 makes it suitable for multiple LED applications
including LED modules and display subsystems. The HT16K33 is compatible with
most microcontrollers and communicates via a two-line bidirectional I2C-bus.

The working schematic of HT16K33 chip

![](media/fa5b7bd0d5ce98dbd4cb392dfb0b95e7.png)

We design the drive module of 8\*8 dot matrix based on the above principle. We
could control the dot matrix by I2C communication and two pins of micro
controller, according to the above diagram.

1.  **Specification of 8\*8 dot matrix**

Input voltage: 5V

Rated input frequency: 400KHZ

Input power: 2.5W

Input current: 500mA

4\. Introduction for Modulus Tool

The online version of dot matrix modulus tool:

[http://dotmatrixtool.com/\#](http://dotmatrixtool.com/)

① Open links to enter the following page.

①Open links to enter the following page.

![](media/354693b5679a2615c62e99b7025d6355.png)

②The dot matrix is 8\*16 in this project, so set the height to 8, width to 8, as
shown below.

![](media/501ba516e4be9c8ec4ca6f37e2b6915f.png)

Click Byte order to select “**Row major”**

![](media/5e29353965bbe864662cf4a93bd06268.png)

③ Generate hexadecimal data from the pattern

As shown below, press the left mouse button to select, the right button to
cancel, draw the pattern you want, click **Generate**, and the hexadecimal data
we need will be produced.

![](media/32e674da893cc93cd1330a9da73269cb.png)

The generated hexadecimal code(0x00, 0x66, 0x00, 0x00, 0x18, 0x42, 0x3c, 0x00)
is what we display, and save it.

1.  **Connection Diagram**

**![](media/494862d00a1805a9553d71fba058dd42.png)**

Note: The pin G, V, SDA and SCL of dot matrix module are separately connected to
G, 5V, A4 and A5 of motor drive shield. Plug power to BAT interface.

1.  Test Code：

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                     |
|-----------|-----------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_9_8\*8 LED Board |
|           | File Name                                                 |
|           | lesson_9.1_8\*8 LED Board                                 |

You could edit code step by step as follows:

(1) Click “Control” to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

(2) Enter“Module”→”Display_Module”→

![](media/e5e5033b54fb1c2aec2209feaa7a80ca.png)

![](media/c73a9332d95d2806b9cb4701efc07076.png)

1.  Go to “Display_Module” to get
    block![](media/39c3047f67a8c67b689c4076e42a5595.png)and leave it into
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)，and click drop-down
    triangle button to set“ON”.

![](media/f885229b9bcfb3a4d46b6be534bf63ac.png)

1.  Move out block![](media/f276c670de1ae57e4f0a611c4e31014e.png)from
    “Display_Module”，

Tick the white box to light up LED, “√”will appear and generate a smile face
pattern. As shown below:

![](media/f8e239ed7ab5b58daa0dc04c772ed6b6.png)

Complete Program：

![](media/5e9cbbf20a1b11cec2a81fb05084d0a3.png)

**8. Test Result**

Upload code, plug in power and turn on switch of smart car, 8\*8 dot matrix
displays a smile face pattern.

![](media/8ee27a57b246a2c39631585e41a5932b.png)

**9. Extension Practice：**

Let’s make dot matrix draw a heart, just enter the website and draw the
following pattern.

[http://dotmatrixtool.com/\#](http://dotmatrixtool.com/)

![](media/746028dc9efd3949b158e15542df4152.png)，

Then we get the code of heart pattern

![](media/e20c01636681acf92a12716621bb9411.png)

Replace the above code of heart pattern, the complete code is shown below:

| File type | Route                                                     |
|-----------|-----------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_9_8\*8 LED Board |
|           | File Name                                                 |
|           | lesson_9.2_Extension Practice                             |

You could edit code step by step as follows:

Complete Program：

![](media/8c515c3938b91f07381bbab775fca0c0.png)


Upload code, plug in power and turn on switch of smart car, 8\*8 dot matrix
displays a heart pattern.

![](media/956fb067b4041cb62be5deec34110846.png)

### Project 10: Line Tracking Robot**

![](media/ad40150b9cd84f7848753cca5322a4c3.jpeg)

1.  **Description**

The previous projects are inclusive of the knowledge of multiple sensors and
modules. Next, we will work on a little challenging task.

We could make a line tracking car on top of the working principle of line
tracking sensor.

**Line tracking robot car:**

| Middle tracking sensor | detects black line：HIGH |
|------------------------|--------------------------|
|                        | detects white line：LOW  |
| Left tracking sensor   | detects black line：HIGH |

detects white line：LOW

Right tracking sensor

detects black line：HIGH

detects white line：LOW

Condition 1

Status 2 detecting the left and the right tracking sensor

Status

Middle tracking sensor detects black line

left tracking sensor detects black line; right sensor detects white line

Rotate to left

(Set PWM to 200）

left tracking sensor detects white line; right sensor detects black line

Rotate to right

(Set PWM to 200）

left and right tracking sensor detect black line

Go front（Set PWM to 200）

left and right tracking sensor detect white line

Go front（Set PWM to 200）

Middle tracking sensor detects white line

Only left line tracking sensor detects black line

Rotate to left（Set PWM to 200）

Only right line tracking sensor detects black line

Rotate to right（Set PWM to 200）

Left and right line tracking sensors detect black line

stop

Left and right line tracking sensors detect white line

stop

**Flow Chart**

![](media/3bef8ab0fb4bb48ea3221a68c5d88711.png)

1.  **Connection Diagram**

**![](media/60af6e8eb33d08c832bc96a99b413261.png)**

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                           |
|-----------|-----------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_10_Line Tracking Robot |
|           | File Name                                                       |
|           | lesson_10_Line Tracking Robot                                   |

You could edit code step by step as follows:

1.  Go to“Control”Module to find out
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

2.  Click“Variables”to move out
    block![](media/1ae07a66a021f66804a4db9141d3e6f5.png)and duplicate it for two
    times.

(3) Separately change item into val_L, val_C and val_R.

(4) Go to“Math”to move out
block![](media/0171c9b9d68df2b854ebded805ca3371.png)and copy it twice.

(5) Edit the following code string:

![](media/7f33daf90ba0abb803f54b9625ad0fa3.png)

(6) Go to “Variables” to get
block![](media/4d36fd0b35d9982289a193bd291a1d7c.png).

(7) Tap“robot”→“TurtleCar”to move out
block![](media/cbed9d8eadcc508b9badc5b33aab39af.png)

![](media/4d36fd0b35d9982289a193bd291a1d7c.png)+
![](media/cbed9d8eadcc508b9badc5b33aab39af.png)=
![](media/f290aac72994f71a27b1a3e924052ab7.png)

(8) Duplicate block![](media/f290aac72994f71a27b1a3e924052ab7.png)twice，then
change val_L into val_C and val_R; left_tracking into center_tracking and
right_tracking. ![](media/3872c52486ef43cab0ce777912f2506b.png)

(9) Click“Control”to get block ![](media/2ca74f70e4001ad5a00d135a596025ab.png)，
click![](media/6b0bc0755ffe368004c9ad0f73a1b573.png)，and
move![](media/3d802292f690f8fa147d843b30f33692.png)into
![](media/2fdb1be9af49544f385db0f5fdc0591b.png)，
then![](media/2ca74f70e4001ad5a00d135a596025ab.png)block turns
into![](media/e648c3aa6f3059cc113923bc4160abcb.png)block.

1.  Click“Logic”to move out
    block![](media/ba4beab2225dda3e12dc06a6f193731f.png)and place it behind if
    block. Go to“Variables”to drag out
    block![](media/dc1d0c92f8f64ee21c89b0384519c826.png)into left box of “=”
    block，

(11) Copy![](media/0171c9b9d68df2b854ebded805ca3371.png)again and leave it into
right box of“=”b lock，and change 0 into 1.
![](media/328dc3344de70b12ef784cebb4f7997f.png)

(12) Tap“Robot”→“TurtleCar”→![](media/6e5429171e6c6d505284669392dd0616.png)

(13) Put it under block val_C=1, and change 0 into 200.

![](media/ad0ac3be95f3193bdc5cde85f63407b1.png)

(14) Go to“Control”to move
block![](media/2ca74f70e4001ad5a00d135a596025ab.png)into else
block，click![](media/6b0bc0755ffe368004c9ad0f73a1b573.png)，drag
block![](media/8ea2bafa58f42edf0c11e9e2a3f5bc41.png)into
![](media/23d14c6bea2dbc6dce97e3b22ee8adcb.png)block and move
block![](media/9bc8c8a6de8c36f6f62e3efb6da47926.png)into
![](media/23d14c6bea2dbc6dce97e3b22ee8adcb.png)block，
then![](media/2ca74f70e4001ad5a00d135a596025ab.png)block turns into
block![](media/cee6c9bc223850fe80df787106c6ac7a.png).

(15) Click“Logic”to move out
block![](media/f1a063334f9c7f82ff4903fa84b9eebc.png)
and![](media/ba4beab2225dda3e12dc06a6f193731f.png)

(16) Place ![](media/f1a063334f9c7f82ff4903fa84b9eebc.png)behind if block, and
leave![](media/ba4beab2225dda3e12dc06a6f193731f.png)in the left box of
“and”block.

(17) Go to“Variables”to drag out
block![](media/316226358a4880e2622edfa9dd36d17f.png)into left box of“=”block，

(18) Copy![](media/0171c9b9d68df2b854ebded805ca3371.png)again and leave it into
right box of“=”b lock，and change 0 into 1.

(19) Copy block ![](media/041ac2313b9d45e53df1e7d01570a576.png)once and keep it
in the right box of “and”block, change val_L into val_R, 1 into 0

![](media/8fbbd32f113528461f5b2a98f74ea752.png)

1.  Click "robot" → "TurtleCar" →![](media/7a008d1f3e99015ffd776284ce5136bb.png)

Place it behind the second do block and set to 200 PWM

![](media/af2ad8caaac02cf91544b2810366cd09.png)

1.  Replicate block![](media/9da5cbe0926b0b2719b905c8b9ce1014.png)once and leave
    it behind else if.

2.  Set to“val_L=0 and val_R=0

![](media/c2c41c34dec95270b1bfcb87e31e2214.png)

1.  Click "robot" → "TurtleCar” →![](media/1292063e60ca4b18b99417808f68826d.png)

Place it behind the third do block, and set to 200 PWM

1.  Drag out block ![](media/eacd18b1a169f74220d4f59e595911aa.png)and keep it
    behind the second else block

![](media/285775b2eaa6bcb491adc8376151cfc3.png)

Complete Program：

![](media/878bd521a597cb42f7519f44540be840.png)

1.  **Test Result**

Upload code on the development board, plug in power and turn on the switch of
smart car. The smart turtle car will walk along the black line.

### Project 11: Ultrasonic Follow Robot

![](media/9dadf95320bb37fd2c4f35f5b03551d6.jpeg)

**1. Description**

In this project, we detect the distance value of the obstacle to drive two
motors so as to make robot car move and 8\*8 dot matrix show smile face pattern

Control the motor rotating by measured data, thus control the motion of robot
car.

The specific logic of ultrasonic follow robot car is as shown below:

| Detection | Measured distance of front obstacles |
|-----------|--------------------------------------|
| Setting   | Set the angle of servo to 90°        |
| Condition | Distance＜8                          |
| Status    | Go back（set PWM to 200）            |
| Condition | distance≥8 and distance＜13          |
| Status    | Stop                                 |
| Condition | distance≥13 and distance＜35         |
| Status    | Go front（set PWM to 200）           |
| Condition | distance≥35                          |
| Status    | stop                                 |

Flow Chart

![](media/aa7242572f1a32ac056ff6e284a770f8.png)

**2. Program Process**

Below is app of turtle robot car interface and we have listed out what function
of each key does

| Pair Bluetooth module |                                    |
|-----------------------|------------------------------------|
| Enter control page    |                                    |
| Disconnect Bluetooth  |                                    |
| Press: F Release: S   | robot goes front; release to stop  |
| Press: L Release: S   | robot turns left; release to stop  |
| Click to send “S”     | Stop                               |
| Press: R Release: S   | robot turns right; release to stop |
| Press: B Release: S   | robot goes back; release to stop   |
| Click to send “Y”     | Start Ultrasonic follow function   |
| ---                   |                                    |
| Click to send “U”     | Start ultrasonic avoiding function |
| Click to send “X”     | Start line tracking function       |

1.  **Flow Chart**

**![](media/f945d744566c8526f46306f81317bbaa.png)**

1.  **Connection Diagram**

**![](media/027ad27bec7619230f1c128cf03716c4.png)**

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                              |
|-----------|--------------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_11_Ultrasonic Follow Robot |
|           | File Name                                                          |
|           | lesson_11_Ultrasonic Follow Robot                                  |

You could edit code step by step as follows:

1.  Enter“Serial Port”to move
    block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)+
![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)=
![](media/ab706faf61854a4bb27663a5cac4325c.png)

1.  Go to“Variables”to move
    block![](media/6f172be17940bbd0c635924742208b16.png)into
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)，enter“Math”to drag
    block![](media/6b5857774b87b36258be2b8a48752627.png)into
    block![](media/6f172be17940bbd0c635924742208b16.png)，and change item into
    distance. ![](media/ba047c87610d3294e9cd0d38273f2835.png)

2.  Click“robot”→“TurtleCar”→![](media/b63f808e1f8d20dcf2314adde7245a4d.png)

3.  Leave it under block “Declare distance as...0”and change 0 into 90

![](media/9673ef619838720d87abbf0672350fd9.png)

1.  Go to "Variables" to move out
    block![](media/26fc7926b78a600dee26d9b92996692f.png)，

Enter "robot" → "TurtleCar" → ![](media/2ef5d9974f45624b0eecb34035e7d318.png)

1.  ![](media/26fc7926b78a600dee26d9b92996692f.png)+
![](media/2ef5d9974f45624b0eecb34035e7d318.png)=
![](media/ea70292d81df489ecef46a0b897c3a75.png)

2.  Go to “serial”to move![](media/6c6c8ecff207053dc9950978c0939a72.png)block
    out, and
    combine![](media/ef2bdca85646a3887e79d2f82bdb1d62.png)with
    ![](media/6c6c8ecff207053dc9950978c0939a72.png)

![](media/db1883063611fd4977807057349a0c35.png)

1.  Click “Control” to move out
    block![](media/2ca74f70e4001ad5a00d135a596025ab.png)，
    tap![](media/86a19fdfc831358c605f99cf73254079.png)，
    ![](media/d0582e0ce7715347855beb46f30947cd.png)appears, drag
    ![](media/8ea2bafa58f42edf0c11e9e2a3f5bc41.png)into
    block![](media/23d14c6bea2dbc6dce97e3b22ee8adcb.png)for 2 times and move
    ![](media/9bc8c8a6de8c36f6f62e3efb6da47926.png) into if block, then the
    block![](media/f1eea600de88c95aa2ef0ae8344c2550.png)is produced.

2.  Enter “Logic” to move block
    ![](media/ba4beab2225dda3e12dc06a6f193731f.png)into if block

3.  Go to “Variables” to drag
    block![](media/ef2bdca85646a3887e79d2f82bdb1d62.png)into left box of “=”

4.  Click “Math” to move out block
    ![](media/0171c9b9d68df2b854ebded805ca3371.png)into right box of “=”, change
    0 into 8, and “=” into “\<”.

![](media/98659dca990cdd667ae101a65a3a6e41.png)

1.  Click "robot" → "TurtleCar"→![](media/3e1ccafb1c4b185bef9d2119ef3674c6.png)

2.  Put it behind “do” block and set to 200 PWM.

![](media/7eca1cf44cf6b17ded47b68c93f35399.png)

1.  Go to“Logic”to move out
    block![](media/f1a063334f9c7f82ff4903fa84b9eebc.png)and combine with else if
    block.

2.  Replicate block![](media/b4e0331e4c67bd18e039faa208d2048a.png)twice and
    place them at both side of “and” block and edit the code string as follows：

![](media/c4f26edf98369bae5ac5ea4290e376b6.png)

1.  Click "robot" → "TurtleCar" →![](media/c844d1424c5c7ca326e23b87687d43ef.png)

2.  Combine it with the second do block.

![](media/fcc41708bd697076e7be9cb84c4facbe.png)

1.  Copy block![](media/0676dd83f5176fbd3dea83e5736dae61.png)once

2.  Place it behind the second else if block，and edit the code string as below:
    ![](media/fe50de8358cf8212286998b7b2c091ca.png)

3.  Drag out![](media/c844d1424c5c7ca326e23b87687d43ef.png)and
    ![](media/80399a67bc3119ecb1d2c7faca1cd971.png)from "TurtleCar"，and finish
    the code string as follows:

![](media/615833a282ea7d8bf5ec3433618f2e94.png)

Complete Program：

![](media/591e61b5bab98fcca434d48c4b5f3c66.png)

1.  **Test Result**

Upload the code to the development board, plug in power and turn on the switch
of smart car. Adjust the servo on turtle robot car to 90°, robot car will follow
the obstacle to move((robot car only moves forward and backward).

### Project 12: Ultrasonic Avoiding Robot

**![](media/df4f5338366adbe9b9f6a90e0c092013.jpeg)**

1.  **Description**

We’ve learned LED matrix, motor drive, ultrasonic sensor and servo in previous
lessons. Next, we could make an ultrasonic avoiding robot!

The measured distance between ultrasonic sensor and obstacle can be used to
control servo to rotate so as to make robot car move.

The specific logic of ultrasonic avoiding smart car is as shown below:

  |
|-|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_12_Ultrasonic Avoiding Robot |
|           | File Name                                                            |
|           | lesson_12_Ultrasonic Avoiding Robot                                  |

You could edit code step by step as follows:

1.  Go to“Control” to find out
    block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

2.  Separately change item into distance1, distance2 and distance3.

3.  Go to “Math” to move out
    block![](media/0171c9b9d68df2b854ebded805ca3371.png)and copy it for three
    times

4.  Edit the following code string:

![](media/0e25f550fa171b7a7e1e968ec3d52eb9.png)

1.  Enter "robot" → "TurtleCar" →
    ![](media/b63f808e1f8d20dcf2314adde7245a4d.png), change 0 into 90

2.  Drag out ![](media/b36d41f8c3f679d192b1f7a4045b2f50.png) from“Control”and
    delay in 300ms.

3.  Edit the code string as follows:

![](media/d14e938c3293eda94af6e754b1ed9846.png)

1.  Then move out block
    ![](media/32f984b83169c50e1bc61f528cc2207a.png)and![](media/62852291dd667b5e366e265882ba9d66.png)
    and place them into block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

![](media/ce572b1a15dc1450cfecaa81efb36885.png)

1.  Go to "Variables" to drag out
    block![](media/faf2bcafb07348131d1fa4167e2c5a51.png)，and move out
    ![](media/81d23574ad2c0cf358b44a500c770665.png) from "TurtleCar"，

![](media/faf2bcafb07348131d1fa4167e2c5a51.png)+
![](media/81d23574ad2c0cf358b44a500c770665.png)=
![](media/9252889d89cde79fb6578b5a004662c0.png)

1.  Click “Control” and drag it into
    block![](media/fad4c0aa5b58d92bf0269099face7f63.png)，click![](media/6b0bc0755ffe368004c9ad0f73a1b573.png)
    and move![](media/4df0c9deaa8baeddd3a9047381c333bb.png)into
    ![](media/ec67799ae6a24d7f0bc062e6efad352e.png)then we get
    block![](media/1ecffbd539806a583d03347c7aa5a77a.png).

2.  Go to “Logic” to get ![](media/f1a063334f9c7f82ff4903fa84b9eebc.png) and
    ![](media/ba4beab2225dda3e12dc06a6f193731f.png).

3.  Place ![](media/f1a063334f9c7f82ff4903fa84b9eebc.png)into if block，and
    leave ![](media/ba4beab2225dda3e12dc06a6f193731f.png) in the left box of
    block![](media/f1a063334f9c7f82ff4903fa84b9eebc.png).

4.  Enter “Variables” to get
    block![](media/63bd47f41b8c51c393507f0dee65fe46.png) and keep it at left box
    of block “=”.

5.  Go to “Math” to move out![](media/0171c9b9d68df2b854ebded805ca3371.png)into
    right box of block “=”, change “=” into“≠”. Replicate
    block![](media/c8fb57a00680cf02b775515a2045de50.png)once and set code string
    as follows:

![](media/50dd051e43d614dd431532b847c58ef7.png)

1.  Go to "robot" →
    "TurtleCar"→![](media/fba5c2af932b312a245c3f7cb85b0c48.png),
    ![](media/62852291dd667b5e366e265882ba9d66.png)
    and![](media/541fc4e3abe8b3bff7fc612e78517574.png)

2.  Place them behind do block![](media/92cee3f55f0fcf395d517f8b6006fb61.png)，

3.  Click ![](media/c359871d382ce47742b64c2c15e34c2c.png) to select“STOP”，and
    move out ![](media/b36d41f8c3f679d192b1f7a4045b2f50.png) and set to 100ms.
    As shown below:

![](media/ec005983844882b6464760ce1a36b537.png)

1.  Click "robot" → "TurtleCar"
    →![](media/b63f808e1f8d20dcf2314adde7245a4d.png), change 0 into 180.

2.  Copy![](media/b36d41f8c3f679d192b1f7a4045b2f50.png) once and set to 500ms.

3.  Edit the code string as follows:

![](media/b5f5d7c9c93586dc0c260abdba8b3470.png)

1.  Duplicate
    block![](media/9252889d89cde79fb6578b5a004662c0.png)and![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)

2.  Change distance1 into distance2, and 1000 into 100.

3.  Finish the following code string as follows:

![](media/0b7eec5c3acc4ddeeacfe933b12f01ac.png)

1.  Duplicate code string![](media/2b60779fb5aabc6a86f12ddad8698f82.png)once and
    change 180 into 0, distance2 into adistance3.

2.  Place it under block “Delay ms 100”

![](media/c4b65aabbcfe26bd25e2f43021eba820.png)

1.  Click “Control” and drag it into
    block![](media/fad4c0aa5b58d92bf0269099face7f63.png)，
    click![](media/6b0bc0755ffe368004c9ad0f73a1b573.png) and
    move![](media/4df0c9deaa8baeddd3a9047381c333bb.png)
    into![](media/ec67799ae6a24d7f0bc062e6efad352e.png) then we get
    block![](media/1ecffbd539806a583d03347c7aa5a77a.png).

2.  Go to “Logic” to move out
    block![](media/6b2e4153feb0792dfea522a67a56d6e4.png)into if block，then
    click“Variables”to drag
    block![](media/fa5fb8b7ef2d760a7a3e0f9c31fca33e.png)into left box
    of“=”block，and move
    block![](media/39a49014d886663ec2d534280f03fe12.png)into right box
    of“=”，and change“=”into“＞”.

![](media/4b1f52a35759ecf292957b8fd74f798a.png)

1.  Find out block![](media/90ac80a9de35ea1b671e11e77af08110.png),
    ![](media/62852291dd667b5e366e265882ba9d66.png)
    and![](media/541fc4e3abe8b3bff7fc612e78517574.png) from"TurtleCar"

2.  Place them behind do block of code
    string![](media/84e80e3028bb529ff728f26281c4336f.png).

3.  Set to 200 PWM and click![](media/c359871d382ce47742b64c2c15e34c2c.png) to
    select“←”

![](media/006bc339a859329cb2521b770eed4adf.png)

1.  Move out block![](media/b63f808e1f8d20dcf2314adde7245a4d.png)and leave it
    under block![](media/ce8017a4d2692510cb3233fa51a4f191.png)and change 0 into
    90.

2.  Copy block![](media/b36d41f8c3f679d192b1f7a4045b2f50.png)and set to 400ms,
    as shown below:

![](media/f86ef5c25ba5a4683184bc8d6014ccfb.png)

1.  Then drag out block![](media/62852291dd667b5e366e265882ba9d66.png)and
    ![](media/541fc4e3abe8b3bff7fc612e78517574.png)

2.  Place them below block “delay ms 400” and
    tap![](media/c359871d382ce47742b64c2c15e34c2c.png) to choose“↑”.

![](media/346ee6854559616cc6c7c34eb65e7bef.png)

1.  Go to "TurtleCar" to move block
    ![](media/30ccdcb349ece3d25d63cf2eb8458ed6.png)behind else block，

2.  Copy code string![](media/95c06c9b3efbb523d70b75a0a3f6c6f1.png)once and
    place it into else block.

3.  Set to 200 PWM and delay in 500ms. Click“←”to choose“→”.
    ![](media/ee0f5f368d6f3fb1f06d3060e91111b0.png)

4.  Move out block![](media/5eb84a4c3466926c0d027ac7ec0f3c01.png),
    ![](media/62852291dd667b5e366e265882ba9d66.png)
    and![](media/541fc4e3abe8b3bff7fc612e78517574.png)

5.  Change 0 into 200, click ![](media/c359871d382ce47742b64c2c15e34c2c.png) to
    select“↑”.

6.  Leave the above blocks into else block, as shown below:
    ![](media/e34831201b7758358419d6d642d960f9.png)

Complete Program：

![](media/c807861c495123bc70e47bcae88c0ec4.png)
![](media/a932272e9f81d2c3f69747f66bc12b49.png)
![](media/a13f63164d9beb792c3e516e7edc8c37.png)

1.  **Test Result**

After uploading the code on the keyestudio V4.0 board, wire according to
connection diagram. Turn on the switch of robot car, the smart car can
automatically avoid obstacles.

### Project 13: IR Remote Control Robot

![](media/40c436f91b103dafa14c82c8459579a9.jpeg)

1.  **Description**

In this project, we will make IR remote control robot car!

Press the button on IR remote control to drive robot car to move, and the
corresponding state pattern is displayed on the 8\*16 LED matrix.

The specific logic of IR remote control robot car is shown below:



| Remote control                                        |                        
|-------------------------------------------------------|
| Go front（PWM set to 100）           |
|                                                       |
 8\*8 LED matrix shows front icon     |
| ![](media/ae8110034aacb083151cfd882ee599ba.png)FFA857 | 
Back（PWM set to 100）               |
|                                                       | 
8\*8 LED matrix shows back icon      |
| ![](media/bce9cba2c6d2465fbcce570ad4210eba.png)FF22DD |
 Rotate to left（PWM set to 200）     |
|                                                       | 
8X16 LED matrix shows leftward icon  |
| ![](media/ad907a618af86f30d52986bbbd57ba76.png)FFC23D | 
Rotate to right（PWM set to 200）    |
|                                                       |
 8X16 LED matrix shows rightward icon |
| ![](media/9716a4ed61a4064d2f47a7b73eccaf87.png)FF02FD | 
Stop                                 |
|                                                       | 
8X16 LED matrix shows“STOP”          |

1.  **Flow Chart**

![](media/fd56d635be98a36d548896f7851b4789.png)

1.  **Connection Diagram**

**![](media/17ddde5353e0f1a79d96cbd2cfabbe11.png)**

**Note: IR receiver is connected to P4 interface.**

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                               |
|-----------|---------------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/ lesson_13_IR Remote Control Robot |
|           | File Name                                                           |
|           | lesson_13_IR Remote Control Robot                                   |

You could edit code step by step as follows:

1.  Click“Control” to get block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

(2) Enter“Serial Port”to move
block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)+
![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)=
![](media/ab706faf61854a4bb27663a5cac4325c.png)

(3) Go to "robot" →
"TurtleCar"→block![](media/690df74b6b7846f3eeb11f517bac56c9.png)and
![](media/42bbeb21c15f68d191702f59428b9f86.png),

Combine them with block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

![](media/a2f519b4a446efcd13e41c7f2fae6f08.png)

(4) Enter "robot" → "TurtleCar"
→![](media/cb356e4f3ba2b3b406fffa423c780d8e.png)，then click "SerialPort" to
drag block![](media/6b5c3de215ccbc2b3da6d9b8948ba5e1.png)into
block![](media/cb356e4f3ba2b3b406fffa423c780d8e.png)，

(5) Tap "Variables" to move block![](media/b358f4a37c9c416e6b197b2a9a7e3a30.png)
into blank box of block![](media/6b5c3de215ccbc2b3da6d9b8948ba5e1.png)

![](media/a59f9570a29fc5de4dcc108b9fb8d91d.png)

1.  Click“Control”to move out
    block![](media/705027c6884755f58076a4aa6a4b4c0a.png)，
    click![](media/86a19fdfc831358c605f99cf73254079.png)，
    tap![](media/86a19fdfc831358c605f99cf73254079.png)，
    ![](media/46aa61c88286ca9bc1a743a1a5b0e610.png)appears, drag
    ![](media/fe01b3e71a9cbf9b66658d604751bbc6.png)into
    block![](media/a6b2092c13f6f0abbb7110938d98fba5.png)for 5 times，the
    block![](media/f67c99f4f1a290e897f01b28ee2f6973.png)is produced.

2.  Click "Variables" to move
    block![](media/b358f4a37c9c416e6b197b2a9a7e3a30.png)behind block“switch”.

![](media/75132edfc7c41ce389392a79265dc052.png)

1.  Go to“Math”to get block![](media/17257e174cbf0ff3530f8e6a9cb94156.png)and
    put it behind the first block case，change a into 0xFF629D；

2.  Enter "robot" → "TurtleCar"→![](media/09211e3899f0a06a5dc93148a19f1d04.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png)
    and![](media/d0350436c74cd925a0143056881b51ae.png)

3.  Place the above blocks under the first block case, change 0 into 200，and
    click![](media/078be6493e6b6612c3cb871c607e4e52.png) to select“↑”

![](media/a843fe06c509b50980d10af98d3bd88d.png)

1.  Go to“Math”to get block![](media/17257e174cbf0ff3530f8e6a9cb94156.png)and
    put it behind the second block case，change a into 0xFFA857；

2.  Enter "robot" → "TurtleCar"→![](media/d7ed5e764a95331ca08f1485bad791fd.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png)
    and![](media/d0350436c74cd925a0143056881b51ae.png)

3.  Place the above blocks under the second block case, change 0 into 200，and
    click![](media/078be6493e6b6612c3cb871c607e4e52.png) to select“↓”.

![](media/5ec72146525cc20524682184b7a88a3f.png)

1.  Go to“Math”to get block![](media/17257e174cbf0ff3530f8e6a9cb94156.png)and
    put it behind the third block case，change a into 0xFF22DD；

2.  Enter "robot" → "TurtleCar"→![](media/a7473518863b648840b8160e767e1051.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png)
    and![](media/d0350436c74cd925a0143056881b51ae.png)

3.  Place the above blocks under the third block case, change 0 into 200，and
    click![](media/078be6493e6b6612c3cb871c607e4e52.png) to select“←”.

![](media/ee7472c5424973c4e0f57451e807ac30.png)

1.  Go to“Math”to get block![](media/17257e174cbf0ff3530f8e6a9cb94156.png)and
    put it behind the fourth block case，change a into 0xFFC23D；

2.  Enter "robot" → "TurtleCar"→![](media/61b8c21fc7a72125a09660ee3f4be337.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png)
    and![](media/d0350436c74cd925a0143056881b51ae.png)

3.  Place the above blocks under the fourth block case, change 0 into 200，and
    click![](media/078be6493e6b6612c3cb871c607e4e52.png) to select“→”.

![](media/a409af1140028890ec9aee959f7010a3.png)

1.  Go to“Math”to get block![](media/17257e174cbf0ff3530f8e6a9cb94156.png)and
    put it behind the fifth block case，change a into0xFF02FD；

2.  Enter "robot" → "TurtleCar"→![](media/87f47f3fe12aa73edc739ed5deb1fe8d.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png)
    and![](media/d0350436c74cd925a0143056881b51ae.png).

3.  Place the above blocks under the fourth block case, change 0 into 200，and
    click![](media/078be6493e6b6612c3cb871c607e4e52.png) to select“STOP”.

![](media/bfef7cee4041ddbf2713361d59c9b269.png)

Complete Program：

![](media/5ebfa32ce1a8b422c4315fef784b9d10.png)
![](media/e4acce790831ffc34a76d60db041d231.png)


1.  **Test Result**

Upload the code and press the buttons on IR remote control to make turtle car
show different motion.

### Project 14: Bluetooth Control Robot

**![](media/40c436f91b103dafa14c82c8459579a9.jpeg)**

1.  **Description：**

We’ve learned the basic knowledge of Bluetooth, in this lesson, we will make a
Bluetooth remote smart car. In the experiment, we default the HM-10 Bluetooth
module as a Slave and the cellphone as a Host.

keyes BT car is an APP rolled out by keyestudio team. You could control the
robot car by it readily.

Special Note: you need to remove the Bluetooth module before uploading the test
code, otherwise the test code will fail to upload.

Reconnect the Bluetooth module, after uploading code successful.

The program will be generated if you find the following file and drag it into
Mixly software.

1.  **Test the key value of app**

Special Note: Before uploading the test code, you need to remove the Bluetooth
module, otherwise the test code will fail to upload. After the code is uploaded
successful, then reconnect the Bluetooth module.

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                             |
|-----------|-------------------------------------------------------------------|
| MIX file  | ../tutorialforMixly/MixlyCode/ lesson_14_Bluetooth Remote Control |
|           | File Name                                                         |
|           | lesson_14.1_Bluetooth Reads Data                                  |

You could edit code step by step as follows:

(1) Go to“Control”Module to find out
block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

(2) Enter“Serial Port”to move
block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)+
![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)=
![](media/ab706faf61854a4bb27663a5cac4325c.png)

(3) Go to "robot" → "TurtleCar"
→![](media/a6db964c1791129b5b598bb42d754e95.png).

(4) Click "SerialPort" to move block
![](media/e833ec02bd6816cef1f10cb7ed2709e4.png)into
![](media/a6db964c1791129b5b598bb42d754e95.png)；enter "Variables" to drag
block![](media/9fc46a764fa2d5eca94f1b0d2e70f79d.png)into![](media/e833ec02bd6816cef1f10cb7ed2709e4.png)

![](media/364cfa865119894e9bd11d8a3c21361d.png)

Complete Program：

![](media/89d2b67e0927708ae2af4b4bfc341953.png)


Upload code to keyestudio V4.0 development board and connect Bluetooth module,
as shown below:

**![](media/db9a7a6fc30760817c564876b54274fd.png)**

After inserting a Bluetooth module, LED on Bluetooth module will flash. Next to
download the App.

The pin RXD, TXD, GND and VCC of Bluetooth module are connected to TX, RX,
\-（GND）and +（VCC）on motor drive board. The pin STATE and BRK don’t need to be
linked.

The pin G, V, SDA and SCL of dot matrix are linked with pin G, 5V, A4 and A5 of
motor drive board. The power is plugged in BAT interface.

**iOS system**

Search keyes BT car in App store

![](media/b3e1a209b1dbe6800c327a868379b1de.png)

After installation, enter its interface.

![](media/325f28e675877bf115831f9fe27c2cf7.png)

Click“Connect”to search and pair Bluetooth.

![](media/48e7ddbeb652962defd1e715e6c4d8ab.png)

Click![](media/48e7ddbeb652962defd1e715e6c4d8ab.png)to enter the main page of
turtle smart car.

![](media/fdb05c73cbee72d17a27d688dd5fe078.png)

**Android System**

1\. Enter Google play store to search Turtle Car(**allow APP to access“location”,
you could enable “location”in settings of your cellphone.**

![](media/300c5e7b3860bc48a6b7d0acbf02a5a2.png)

1.  The app icon is shown below after installation.

    ![](media/6577609d81967188bfa804cdbb6b0ffc.png)

2.  Click app to enter the following page.

![](media/fdb05c73cbee72d17a27d688dd5fe078.png)

1.  After connecting Bluetooth, plug in power and LED indicator of Bluetooth
    module will flash. Tap to search Bluetooth.

    ![](media/9d93124a2e11a8dff472d590f599657b.png)

Click“connect”below HMSoft, then the Bluetooth will be connected and its LED
indicator will stay on.

![](media/cd5242d03749b67742da92ec3ff09f06.png)

After connecting Bluetooth module and open serial monitor to set baud rate to
9600\. Press icon on APP, and the corresponding characters are displayed as shown
below:

![](media/ce9d3b7ef40230c2e98e30ad3c72959c.png)

1.  **Hook-up Diagram**

**![](media/b5aa3e25c49f517ddbacc385a117fd2d.png)**

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                               |
|-----------|---------------------------------------------------------------------|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_14_Bluetooth Remote Control |
|           | File Name                                                           |
|           | lesson_14.1_Bluetooth Control Smart Car                             |

You could edit code step by step as follows:

(1) Click “Control” to find out
block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

(2) Enter “Serial Port” to move
block![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)into![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)

![](media/3b9464e5c3dd4437bc5486d58cc9e039.png)+
![](media/87067dd12cc3e0ad2c37212e0df86c7a.png)=
![](media/ab706faf61854a4bb27663a5cac4325c.png)

(3) Enter "robot" →
"TurtleCar"→![](media/690df74b6b7846f3eeb11f517bac56c9.png)and
![](media/42bbeb21c15f68d191702f59428b9f86.png);

(4) Place them into block![](media/3b9464e5c3dd4437bc5486d58cc9e039.png).

![](media/a2f519b4a446efcd13e41c7f2fae6f08.png)

(5) Enter "robot" → "TurtleCar"
→![](media/da79951e0568d60d13146036eb5a98f7.png)，

Go to "SerialPort" to move
block![](media/9fa23900aaaa4c90e8216a1f08d66c92.png)into
block![](media/da79951e0568d60d13146036eb5a98f7.png); and click "Variables" to
drag block![](media/d386640c7ad120d398a116f0e6e14b57.png)behind
block![](media/9fa23900aaaa4c90e8216a1f08d66c92.png).

![](media/7c9a53b93aeb018c78ed4e3c9ffb9606.png)

1.  Click“Control”to drag out
    block![](media/705027c6884755f58076a4aa6a4b4c0a.png)，
    click![](media/86a19fdfc831358c605f99cf73254079.png)and appear
    box![](media/46aa61c88286ca9bc1a743a1a5b0e610.png)，drag
    block![](media/fe01b3e71a9cbf9b66658d604751bbc6.png)for five times and place
    them into block![](media/a6b2092c13f6f0abbb7110938d98fba5.png)，then we get
    block![](media/f67c99f4f1a290e897f01b28ee2f6973.png);

2.  Click "Variables" to place
    block![](media/d386640c7ad120d398a116f0e6e14b57.png)behind the block“switch”

![](media/9a0e744114fcddb59760c9b9502e2624.png)

1.  Click "Text" to move block![](media/839084fe5e56598d8cbbfbdd8ec41500.png)out
    and keep it behind the first case block，change a into F；

2.  Click "robot" → "TurtleCar"→![](media/09211e3899f0a06a5dc93148a19f1d04.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png)
    and![](media/d0350436c74cd925a0143056881b51ae.png)

3.  Place them under case block, change 0 into 200 and
    tap![](media/078be6493e6b6612c3cb871c607e4e52.png)to select“↑”.

![](media/a1cc2fcb55356c2f4ef5355ad14fd7dc.png)

1.  Copy block![](media/839084fe5e56598d8cbbfbdd8ec41500.png)and place it behind
    the second case，alter a into B；

Go to "robot" → "TurtleCar"→![](media/d7ed5e764a95331ca08f1485bad791fd.png),
![](media/42bbeb21c15f68d191702f59428b9f86.png)
and![](media/d0350436c74cd925a0143056881b51ae.png)

1.  Put the above blocks under the second case block, change 0 into 200 and
    click![](media/078be6493e6b6612c3cb871c607e4e52.png)to select“↓”.

![](media/e6aadbacf178337a7303deb6f7b75b6c.png)

1.  Replicate block![](media/839084fe5e56598d8cbbfbdd8ec41500.png)once and leave
    it behind the third case block，modify a into L；

2.  Click "robot" → "TurtleCar"→![](media/a7473518863b648840b8160e767e1051.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png)
    and![](media/d0350436c74cd925a0143056881b51ae.png)

3.  Put the above blocks under the third case block, change 0 into 200 and
    tap![](media/078be6493e6b6612c3cb871c607e4e52.png) to choose“←”.

![](media/2c4c21fc46f1d2a2970eabfb5fba52a7.png)

1.  Replicate ![](media/839084fe5e56598d8cbbfbdd8ec41500.png) twice and place
    them behind the fourth and fifth case blocks respectively.

2.  Go to "robot" → "TurtleCar"→![](media/61b8c21fc7a72125a09660ee3f4be337.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png),
    ![](media/d0350436c74cd925a0143056881b51ae.png),
    ![](media/87f47f3fe12aa73edc739ed5deb1fe8d.png),
    ![](media/42bbeb21c15f68d191702f59428b9f86.png)and
    ![](media/d0350436c74cd925a0143056881b51ae.png).

3.  Change 0 into 200, click ![](media/078be6493e6b6612c3cb871c607e4e52.png) to
    select“→”and“STOP”, a into R and S.

![](media/278d8c1afb2b6dee7a1cfc99245482a7.png)

![](media/52aac639c37cea406be3ff84c79ebe70.png)

Complete Program：

![](media/2ec4dcc9a4d16e153393df757c0fa9df.png)
![](media/8ceb244cf5f863fddebc9b5fb869e51f.png)

1.  **Test Result**

Upload program to development board, insert Bluetooth module, open App to
connect Bluetooth. Next, press icons on App to control turtle robot car to move.

Special Note: you need to remove the Bluetooth module before uploading the test
code, otherwise the test code will fail to upload.

Reconnect the Bluetooth module, after uploading code successful.

### Project 15: Multi-purpose Bluetooth Robot

1.  **Description**

In previous projects, the robot car only performs single function, however, in
this lesson, we integrate all of function to control smart car via Bluetooth

Here is a simple flow chart of multi-purpose robot car as for your reference.

![](media/350df6f452683134aca3b5b1a1fcf576.jpeg)

1.  **Connection Diagram**

![](media/b696f8b93e9cebe2475ae065f3e1fd7f.png)

1.  **Test Code**

The program will be generated if you find the following file and drag it into
Mixly software.

| File type | Route                                                                    
|
| MIX File  | ../tutorial for Mixly/Mixly Code/lesson_15_Multi-purpose Bluetooth Robot |
 File Name                                                                |
|           | lesson_15_Multi-purpose Bluetooth Robot                                  |

Complete Program：

![](media/1ff91e578ebca3743c6fbf8d36b7c066.png)

![](media/3ac0896b2ae6652334d7434f364eab43.png)

![](media/1774d043b5c01f97d736806cb6ad646d.png)

1.  **Test Result**

Upload the code on the keyestudio V4.0 board. Turn on the switch on robot car.
After connecting to Bluetooth, we could control turtle robot car via App.

## 8. Resources

Wiki page: <https://wiki.keyestudio.com/Main_Page>

Official website: <https://keyestudio.com/>
